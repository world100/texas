window.__require=function e(t,i,n){function a(c,s){if(!i[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var d=i[c]={exports:{}};t[c][0].call(d.exports,function(e){return a(t[c][1][e]||e)},d,d.exports,e,t,i,n)}return i[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<n.length;c++)a(n[c]);return a}({clubdragonpb:[function(e,t){"use strict";cc._RF.push(t,"86f16kqMXFEfICVtx7qjOkp","clubdragonpb"),t.exports=e("protobufjs").newBuilder({}).import({package:null,syntax:"proto2",messages:[{name:"club_tiger_x_dragon_pvp",fields:[],syntax:"proto2",messages:[{name:"MsgBody",syntax:"proto2",fields:[{rule:"optional",type:"ErrorRes",name:"error_res",id:1},{rule:"optional",type:"StateReq",name:"state_req",id:2},{rule:"optional",type:"StateRes",name:"state_res",id:3},{rule:"optional",type:"StateNtf",name:"state_ntf",id:4},{rule:"optional",type:"SlotReq",name:"slot_req",id:5},{rule:"optional",type:"SlotRes",name:"slot_res",id:6},{rule:"optional",type:"PosSlotNtf",name:"pos_slot_ntf",id:7},{rule:"optional",type:"SlotNtf",name:"slot_ntf",id:8},{rule:"optional",type:"SlotRepeatedReq",name:"slot_repeated_req",id:9},{rule:"optional",type:"SlotRepeatedRes",name:"slot_repeated_res",id:10},{rule:"optional",type:"SeatPlayer",name:"seat_player_ntf",id:11},{rule:"optional",type:"PlayerItemList",name:"item_ntf",id:12},{rule:"optional",type:"LeaveNtf",name:"leave_ntf",id:13},{rule:"optional",type:"SeatPlayerReq",name:"seat_player_req",id:14},{rule:"optional",type:"SeatPlayerRes",name:"seat_player_res",id:15},{rule:"optional",type:"SlotFreeTimeNtf",name:"slot_free_time_ntf",id:16},{rule:"optional",type:"MatchRecordNtf",name:"match_record_ntf",id:17},{rule:"optional",type:"InteractiveExpressionReq",name:"interactive_expression_req",id:18},{rule:"optional",type:"InteractiveExpressionRes",name:"interactive_expression_res",id:19},{rule:"optional",type:"InteractiveExpressionNtf",name:"interactive_expression_ntf",id:20},{rule:"optional",type:"StandUpReq",name:"stand_up_req",id:21},{rule:"optional",type:"StandUpRes",name:"stand_up_res",id:22},{rule:"optional",type:"StandUpNtf",name:"stand_up_ntf",id:23},{rule:"optional",type:"SitDownReq",name:"sit_down_req",id:24},{rule:"optional",type:"SitDownRes",name:"sit_down_res",id:25},{rule:"optional",type:"SitDownNtf",name:"sit_down_ntf",id:26},{rule:"optional",type:"SlotRepeatedNtf",name:"slot_repeated_ntf",id:36},{rule:"optional",type:"ChatReq",name:"chat_req",id:40},{rule:"optional",type:"ChatRes",name:"chat_res",id:41},{rule:"optional",type:"ChatNtf",name:"chat_ntf",id:42},{rule:"optional",type:"LastWinPlayerReq",name:"last_win_player_req",id:45},{rule:"optional",type:"LastWinPlayerRes",name:"last_win_player_res",id:46},{rule:"optional",type:"ItemReq",name:"item_req",id:1001},{rule:"optional",type:"RefreshReq",name:"refresh_req",id:1002}]},{name:"ErrorRes",syntax:"proto2",fields:[{rule:"optional",type:"int32",name:"err_no",id:1},{rule:"optional",type:"string",name:"err_msg",id:2},{rule:"optional",type:"string",name:"cmd",id:3}]},{name:"Item",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"id",id:1},{rule:"optional",type:"int64",name:"count",id:2}]},{name:"ItemReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"player_id",id:1}]},{name:"RefreshReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"player_id",id:1},{rule:"optional",type:"int32",name:"type",id:2}]},{name:"PlayerItemList",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"player_id",id:1},{rule:"optional",type:"uint32",name:"seat_id",id:2},{rule:"repeated",type:"Item",name:"list",id:3}]},{name:"SeatPlayer",syntax:"proto2",fields:[{rule:"optional",type:"int32",name:"seat_id",id:1},{rule:"optional",type:"uint32",name:"player_id",id:2},{rule:"optional",type:"string",name:"nickname",id:3},{rule:"optional",type:"string",name:"face_url",id:4},{rule:"optional",type:"uint32",name:"vip",id:5},{rule:"optional",type:"uint32",name:"sex",id:6},{rule:"repeated",type:"Item",name:"item_list",id:7},{rule:"optional",type:"int64",name:"total_slot",id:8},{rule:"optional",type:"int32",name:"rank",id:9},{rule:"optional",type:"int32",name:"total_win",id:10},{rule:"optional",type:"string",name:"register_area",id:11}]},{name:"SeatPlayerReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"type",id:1},{rule:"optional",type:"uint32",name:"player_id",id:2}]},{name:"SeatPlayerRes",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"type",id:1},{rule:"repeated",type:"SeatPlayer",name:"player_list",id:2}]},{name:"StateReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"player_id",id:1}]},{name:"StateRes",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"match_id",id:1},{rule:"optional",type:"int32",name:"state",id:2},{rule:"repeated",type:"SeatPlayer",name:"player_list",id:3},{rule:"repeated",type:"int64",name:"total_slot_list",id:4},{rule:"optional",type:"SeatPlayer",name:"self_info",id:101},{rule:"repeated",type:"int64",name:"self_slot_list",id:102},{rule:"optional",type:"uint32",name:"play_game_cnt",id:103},{rule:"optional",type:"uint64",name:"slot_money_limit",id:1e3},{rule:"repeated",type:"int32",name:"bet_coin_list",id:1002}]},{name:"SeatWin",syntax:"proto2",fields:[{rule:"optional",type:"int32",name:"seat_id",id:1},{rule:"optional",type:"uint32",name:"player_id",id:2},{rule:"optional",type:"int64",name:"coin",id:3}]},{name:"OpenCards",syntax:"proto2",fields:[{rule:"repeated",type:"uint32",name:"cards",id:1},{rule:"optional",type:"uint32",name:"point",id:2},{rule:"optional",type:"uint32",name:"type",id:3}]},{name:"PosWin",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"pos",id:1},{rule:"optional",type:"int64",name:"total_win",id:2},{rule:"repeated",type:"SeatWin",name:"seat_win_list",id:3}]},{name:"StateNtf",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"match_id",id:1},{rule:"optional",type:"int32",name:"state",id:2},{rule:"optional",type:"float",name:"remain_time",id:3},{rule:"optional",type:"OpenCards",name:"dragon_open_cards",id:5},{rule:"optional",type:"OpenCards",name:"tiger_open_cards",id:6},{rule:"optional",type:"uint32",name:"winer",id:7},{rule:"repeated",type:"PosWin",name:"pos_win_list",id:8},{rule:"optional",type:"float",name:"continue_time",id:9},{rule:"repeated",type:"SeatPlayer",name:"player_list",id:10},{rule:"optional",type:"uint32",name:"rich_rank_player_count",id:11},{rule:"optional",type:"uint64",name:"slot_money_limit",id:13}]},{name:"SlotReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"pos",id:1},{rule:"optional",type:"int64",name:"coin",id:2}]},{name:"SlotRes",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"match_id",id:1},{rule:"optional",type:"uint32",name:"pos",id:2},{rule:"optional",type:"int64",name:"coin",id:3}]},{name:"SlotNtf",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"match_id",id:1},{rule:"optional",type:"uint32",name:"player_id",id:2},{rule:"optional",type:"uint32",name:"seat_id",id:3},{rule:"optional",type:"uint32",name:"pos",id:4},{rule:"optional",type:"int64",name:"coin",id:5}]},{name:"SlotRepeatedReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"player_id",id:1}]},{name:"SlotRepeatedRes",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"match_id",id:1},{rule:"repeated",type:"PosSlot",name:"pos_slot_list",id:2}]},{name:"PosSlot",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"pos",id:1},{rule:"optional",type:"int64",name:"coin",id:2}]},{name:"SlotRepeatedNtf",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"match_id",id:1},{rule:"optional",type:"uint32",name:"player_id",id:2},{rule:"optional",type:"uint32",name:"seat_id",id:3},{rule:"repeated",type:"PosSlot",name:"pos_slot_list",id:4}]},{name:"PosSlotNtf",syntax:"proto2",fields:[{rule:"optional",type:"string",name:"match_id",id:1},{rule:"repeated",type:"int64",name:"total_slot_list",id:2}]},{name:"LeaveNtf",syntax:"proto2",fields:[{rule:"optional",type:"uint64",name:"player_id",id:1},{rule:"optional",type:"int32",name:"reason",id:2},{rule:"optional",type:"int32",name:"min_coin",id:3},{rule:"optional",type:"int32",name:"seat_id",id:4}]},{name:"SlotFreeTimeNtf",syntax:"proto2",fields:[{rule:"optional",type:"int32",name:"max_free_time",id:1},{rule:"optional",type:"int32",name:"remain_time",id:2}]},{name:"OneMatch",syntax:"proto2",fields:[{rule:"optional",type:"OpenCards",name:"dragon",id:1},{rule:"optional",type:"OpenCards",name:"tiger",id:2},{rule:"optional",type:"uint32",name:"winer",id:3},{rule:"optional",type:"int64",name:"time",id:4},{rule:"optional",type:"string",name:"match_id",id:5}]},{name:"MatchRecordNtf",syntax:"proto2",fields:[{rule:"repeated",type:"OneMatch",name:"match_list",id:1}]},{name:"InteractiveExpressionReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"type",id:1},{rule:"optional",type:"uint32",name:"id",id:2},{rule:"optional",type:"uint32",name:"target_player",id:3},{rule:"optional",type:"uint32",name:"target_seat",id:4}]},{name:"InteractiveExpressionRes",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"type",id:1},{rule:"optional",type:"uint32",name:"id",id:2},{rule:"optional",type:"uint32",name:"target_player",id:3},{rule:"optional",type:"uint32",name:"target_seat",id:4}]},{name:"InteractiveExpressionNtf",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"player_id",id:1},{rule:"optional",type:"uint32",name:"seat_id",id:2},{rule:"optional",type:"uint32",name:"type",id:3},{rule:"optional",type:"uint32",name:"id",id:4},{rule:"optional",type:"uint32",name:"target_player",id:5},{rule:"optional",type:"uint32",name:"target_seat",id:6}]},{name:"StandUpReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"player_id",id:1}]},{name:"StandUpRes",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"seat_id",id:1}]},{name:"StandUpNtf",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"seat_id",id:1},{rule:"optional",type:"uint32",name:"player_id",id:2}]},{name:"SitDownReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"target_id",id:1}]},{name:"SitDownRes",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"seat_id",id:1},{rule:"optional",type:"uint32",name:"target_id",id:2},{rule:"optional",type:"SeatPlayer",name:"seat_player",id:3}]},{name:"SitDownNtf",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"seat_id",id:1},{rule:"optional",type:"uint32",name:"player_id",id:2},{rule:"optional",type:"uint32",name:"target_id",id:3},{rule:"optional",type:"SeatPlayer",name:"seat_player",id:4}]},{name:"ChatReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"chat_type",id:1},{rule:"optional",type:"uint32",name:"id",id:2},{rule:"optional",type:"string",name:"nickname",id:3},{rule:"optional",type:"string",name:"chat_str",id:4},{rule:"optional",type:"int32",name:"voice_time",id:5},{rule:"optional",type:"string",name:"voice_content",id:6}]},{name:"ChatRes",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"chat_type",id:1},{rule:"optional",type:"uint32",name:"id",id:2},{rule:"optional",type:"string",name:"chat_str",id:4}]},{name:"ChatNtf",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"player_id",id:1},{rule:"optional",type:"uint32",name:"seat_id",id:2},{rule:"optional",type:"uint32",name:"chat_type",id:3},{rule:"optional",type:"uint32",name:"id",id:4},{rule:"optional",type:"string",name:"nickname",id:5},{rule:"optional",type:"string",name:"chat_str",id:6},{rule:"optional",type:"string",name:"face_url",id:7},{rule:"optional",type:"int32",name:"vip",id:8},{rule:"optional",type:"double",name:"c_time",id:9},{rule:"optional",type:"int32",name:"voice_time",id:10},{rule:"optional",type:"string",name:"voice_content",id:11}]},{name:"WinPlayer",syntax:"proto2",fields:[{rule:"optional",type:"int64",name:"coin",id:1},{rule:"optional",type:"uint32",name:"player_id",id:2},{rule:"optional",type:"string",name:"nickname",id:3},{rule:"optional",type:"string",name:"face_url",id:4},{rule:"optional",type:"uint32",name:"vip",id:5}]},{name:"LastWinPlayerReq",syntax:"proto2",fields:[{rule:"optional",type:"uint32",name:"player_id",id:1}]},{name:"LastWinPlayerRes",syntax:"proto2",fields:[{rule:"repeated",type:"WinPlayer",name:"player_list",id:1}]}],isNamespace:!0},{name:"club_tiger_x_dragon_login",fields:[],syntax:"proto2",messages:[{name:"MsgBody",syntax:"proto2",fields:[{rule:"optional",type:"ErrorRes",name:"error_res",id:1},{rule:"optional",type:"LoginReq",name:"login_req",id:2},{rule:"optional",type:"LoginRes",name:"login_res",id:3}]},{name:"ErrorRes",syntax:"proto2",fields:[{rule:"optional",type:"int32",name:"err_no",id:1},{rule:"optional",type:"string",name:"err_msg",id:2},{rule:"optional",type:"string",name:"cmd",id:3}]},{name:"LoginReq",syntax:"proto2",fields:[{rule:"optional",type:"uint64",name:"player_id",id:1},{rule:"optional",type:"int32",name:"game_type",id:2},{rule:"optional",type:"int32",name:"room_type",id:3},{rule:"optional",type:"string",name:"login_token",id:4},{rule:"optional",type:"string",name:"room_token",id:5}]},{name:"LoginRes",syntax:"proto2",fields:[{rule:"optional",type:"uint64",name:"table_id",id:1}]}],isNamespace:!0},{name:"club_tiger_x_dragon_hall",fields:[],syntax:"proto2",messages:[{name:"MsgBody",syntax:"proto2",fields:[{rule:"optional",type:"ErrorRes",name:"error_res",id:1},{rule:"optional",type:"HeartReq",name:"heart_req",id:2},{rule:"optional",type:"HeartRes",name:"heart_res",id:3},{rule:"optional",type:"LeaveReq",name:"leave_req",id:4},{rule:"optional",type:"LeaveRes",name:"leave_res",id:5}]},{name:"ErrorRes",syntax:"proto2",fields:[{rule:"optional",type:"int32",name:"err_no",id:1},{rule:"optional",type:"string",name:"err_msg",id:2},{rule:"optional",type:"string",name:"cmd",id:3}]},{name:"HeartReq",syntax:"proto2",fields:[{rule:"optional",type:"int64",name:"tick",id:1},{rule:"optional",type:"int64",name:"clienttime",id:2}]},{name:"HeartRes",syntax:"proto2",fields:[{rule:"optional",type:"int64",name:"tick",id:1},{rule:"optional",type:"int64",name:"clienttime",id:2},{rule:"optional",type:"int64",name:"servertime",id:3}]},{name:"LeaveReq",syntax:"proto2",fields:[{rule:"optional",type:"uint64",name:"table_id",id:1}]},{name:"LeaveRes",syntax:"proto2",fields:[{rule:"optional",type:"uint64",name:"table_id",id:1}]}],isNamespace:!0}],isNamespace:!0}).build(),cc._RF.pop()},{protobufjs:void 0}],dragonActiveRecord:[function(e,t){"use strict";cc._RF.push(t,"ad9d3pMa+ZC7LYaecB42zog","dragonActiveRecord");var i=e("List");cc.Class({extends:cc.Component,statics:{show:function(){var e=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);e?e.load("res/dragonActiveRecord",cc.Prefab,function(e,t){if(!e&&t&&t instanceof cc.Prefab){var i=cc.instantiate(t);i.setPosition(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height/2),cc.director.getScene().addChild(i)}}):cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME)}},properties:{list:i,curTimeLabel:cc.Label},onLoad:function(){this.clickTime=1,this.matches=1,this.lastSuccessMatches=this.matches},start:function(){var e=this;setTimeout(function(){e.getMatchRecordInfo()},500)},onBtnClicked:function(e){if(0!=cc.vv.utils.allowclick(.3)){var t=e.target.name;"btn_close"==t?this.hidePanel():"next_btn"==e.target.name?this.nextRecord():"pre_btn"==t&&this.preRecord()}},onListRender:function(e,t){e.active=!0,e.stopAllActions(),e.opacity=255,null==this.istion&&t<=Math.min(6,this.list.numItems-1)&&(t==Math.min(6,this.list.numItems-1)&&(this.istion=!0),e.opacity=0,e.runAction(cc.sequence(cc.delayTime(.04*t),cc.fadeIn(.1))));var i=this.infoData.data_list[t];i&&(i.rank_no<4?(e.getChildByName("rankbg").active=!0,cc.vv.utils.setSpritFrame(e.getChildByName("rankbg").getComponent(cc.Sprite),"res/activity/image/rank"+i.rank_no,null,BUNDLEENUM.DRAGONGAME),e.getChildByName("rankLabel").active=!1):(e.getChildByName("rankbg").active=!1,e.getChildByName("rankLabel").active=!0,e.getChildByName("rankLabel").getComponent(cc.Label).string=i.rank_no>20?"20+":i.rank_no+""),e.getChildByName("playerName").getComponent(cc.Label).string=i.nickname,e.getChildByName("betLabel").getComponent(cc.Label).string="\u20b9"+cc.vv.utils.getCoinValueclub(i.rank_data),i.item_list&&i.item_list.length>0?e.getChildByName("awardLabel").getComponent(cc.Label).string="\u20b9 "+cc.vv.utils.getCoinValue(i.coin):e.getChildByName("awardLabel").getComponent(cc.Label).string="\u20b9 0",cc.vv.utils.setPlayerIcon("",i.face_url,e.getChildByName("mask").getChildByName("head").getComponent(cc.Sprite)),e.getChildByName("vipLogo")&&e.getChildByName("vipLogo").getComponent("vipLogo").setNewVip(i.player_id,i.vip))},updateMatchRecord:function(){this.istion=null,this.list.numItems=this.infoData.data_list.length,this.curTimeLabel.string=TXT("txt_dragon_23")+" "+this.infoData.index_no,this.updataPage()},getMatchRecordInfo:function(){var e=this;this.clickTime>0&&(new Date).getTime()-this.clickTime<300||(this.clickTime=(new Date).getTime(),cc.vv.httpRequest.Interface("api/tdkingnew/record",cc.vv.pbManager.hallProtoId.cmd_active_40_record_new,{index_no:String(this.matches)},function(t){if(e.isValid&&t.response&&!t.response.err_no){e.infoData=t.response,e.infoData.page_count=isNaN(parseInt(e.infoData.page_count))?0:e.infoData.page_count;for(var i=0;i<e.infoData.data_list.length;i++){var n=e.infoData.data_list[i];n.tcoin=0,n.lottery_ticket=0,n.guild=0,n.pearl=0;for(var a=0;a<n.item_list.length;a++){var o=n.item_list[a];o.id==cc.vv.global.depositItemID?n.tcoin=cc.vv.utils.getCoinValueclub(Number(o.count)):o.id==cc.vv.global.withrawableItemID?n.jewel=cc.vv.utils.getCoinValue(Number(o.count)):o.id==cc.vv.global.lotteryItemID?n.lottery_ticket=cc.vv.utils.getCoinValueclub(Number(o.count)):o.id==cc.vv.global.guildItemID?n.guild=cc.vv.utils.getCoinValueclub(Number(o.count)):o.id==cc.vv.global.pearlItemID&&(n.pearl=cc.vv.utils.getCoinValueclub(Number(o.count)))}n.lottery_ticket=n.pearl+n.guild+n.lottery_ticket,n.coin=n.tcoin+n.lottery_ticket}e.updateMatchRecord()}}))},nextRecord:function(){this.matches++,this.getMatchRecordInfo(),this.updataPage()},preRecord:function(){this.matches--,this.getMatchRecordInfo(),this.updataPage()},updataPage:function(){0==this.infoData.page_count||1==this.infoData.page_count?(this.node.getChildByName("uiNode").getChildByName("next_btn").active=!1,this.node.getChildByName("uiNode").getChildByName("pre_btn").active=!1):this.matches>=this.infoData.page_count?(this.matches=this.infoData.page_count,this.node.getChildByName("uiNode").getChildByName("next_btn").active=!1,this.node.getChildByName("uiNode").getChildByName("pre_btn").active=!0):this.matches<=1?(this.node.getChildByName("uiNode").getChildByName("next_btn").active=!0,this.node.getChildByName("uiNode").getChildByName("pre_btn").active=!1):(this.node.getChildByName("uiNode").getChildByName("next_btn").active=!0,this.node.getChildByName("uiNode").getChildByName("pre_btn").active=!0)}}),cc._RF.pop()},{List:void 0}],dragonActive:[function(e,t){"use strict";cc._RF.push(t,"b49c7hwQSVKi4Rke1MIf0TT","dragonActive");var i=e("List");cc.Class({extends:e("baseView"),statics:{show:function(){var e=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);e?e.load("res/dragonActive",cc.Prefab,function(e,t){if(!e&&t&&t instanceof cc.Prefab){var i=cc.instantiate(t);i.setPosition(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height/2),cc.director.getScene().addChild(i)}}):cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME)}},properties:{list:i,widgetCom:cc.Widget,awardTips:cc.Node,time_Table:cc.Label,RankView:cc.Node,RecordView:cc.Node},onLoad:function(){var e=this;signal.on("update_ticket",function(t){e.ticket=Number(t)},this),this.clickTime=0,this.ticket=0,this.isShowRule=!1,this.remainTime=0,this.infoData={level:0,point:0,next_point:1,matches_award:0,rank_list:{},level_pre:{},level_pre_pre:{}}},onBtnToggle:function(e,t){1==parseInt(t)?(this.RankView.active=!0,this.RecordView.active=!1):(this.RankView.active=!1,this.RecordView.active=!0)},showData:function(){},start:function(){var e=this,t=cc.view.getVisibleSize();this.node.height=t.height,this.awardTips.active=!1,setTimeout(function(){e.getInfo()},500)},updateUI:function(){var e=this;this.updateRank();var t=this.infoData.remain_time,i=cc.vv.utils.getTimeStr(t),n=i[0];n=parseInt(n)<10?"0"+n:n+"";var a=i[1];a=parseInt(a)<10?"0"+a:a+"";var o=i[2];o=parseInt(o)<10?"0"+o:o+"";var c=i[3];c=parseInt(c)<10?"0"+c:c+"",this.time_Table.string=a+":"+o+":"+c+" "+TXT("txt_dragon_22"),this.time_Table.schedule(function(){t--;var i=cc.vv.utils.getTimeStr(t),n=i[0];n=parseInt(n)<10?"0"+n:n+"";var a=i[1];a=parseInt(a)<10?"0"+a:a+"";var o=i[2];o=parseInt(o)<10?"0"+o:o+"";var c=i[3];c=parseInt(c)<10?"0"+c:c+"",e.time_Table.string=a+":"+o+":"+c+" "+TXT("txt_dragon_22")},1,t-1,0)},updateRank:function(){this.list.numItems=this.infoData.data_list.length;var e=this.node.getChildByName("uiNode").getChildByName("rankLayout").getChildByName("myItemNode");Number(this.infoData.award)>0?(e.getChildByName("noGetNode").active=!1,e.getChildByName("getNode").active=!0):(e.getChildByName("noGetNode").active=!0,e.getChildByName("getNode").active=!1);var t=this.infoData.user_data;if(null!=t.rank_no&&0!=Number(t.rank_no)||(t.rank_no=21),t.rank_no<4?(e.getChildByName("rankbg").active=!0,cc.vv.utils.setSpritFrame(e.getChildByName("rankbg").getComponent(cc.Sprite),"res/activity/image/rank"+t.rank_no,null,BUNDLEENUM.DRAGONGAME),e.getChildByName("rankLabel").active=!1):(e.getChildByName("rankbg").active=!1,e.getChildByName("rankLabel").active=!0,e.getChildByName("rankLabel").getComponent(cc.Label).string=t.rank_no>20?"20+":t.rank_no+""),e.getChildByName("noGetNode").getChildByName("nameLabel").getComponent(cc.Label).string=cc.vv.userMgr.nickname,e.getChildByName("noGetNode").getChildByName("betLabel").getComponent(cc.Label).string="\u20b9"+cc.vv.utils.getCoinValueclub(t.rank_data),e.getChildByName("getNode").getChildByName("addBonusLabel").getComponent(cc.Label).string=this.infoData.award?"\u20b9"+cc.vv.utils.getCoinValueclub(this.infoData.award):"None Bonus",cc.vv.utils.setPlayerIcon("",cc.vv.userMgr.face_url,e.getChildByName("mask").getChildByName("head").getComponent(cc.Sprite)),e.getChildByName("vipLogo")&&e.getChildByName("vipLogo").getComponent("vipLogo").setNewVip(cc.vv.userMgr.player_id,cc.vv.userMgr.vip),t.item_list&&t.item_list.length>0){for(var i=0;i<t.item_list.length;i++){var n=t.item_list[i];n.id==cc.vv.global.depositItemID?t.coin=cc.vv.utils.getCoinValueclub(Number(n.count)):n.id==cc.vv.global.withrawableItemID?t.jewel=cc.vv.utils.getCoinValueclub(Number(n.count)):n.id==cc.vv.global.lotteryItemID?t.lottery_ticket=cc.vv.utils.getCoinValueclub(Number(n.count)):n.id==cc.vv.global.guildItemID?t.guild=cc.vv.utils.getCoinValueclub(Number(n.count)):n.id==cc.vv.global.pearlItemID&&(t.pearl=cc.vv.utils.getCoinValueclub(Number(n.count)))}t.coin&&null!=t.coin||(t.coin=0),t.lottery_ticket&&null!=t.lottery_ticket||(t.lottery_ticket=0),t.guild&&null!=t.guild||(t.guild=0),t.pearl&&null!=t.pearl||(t.pearl=0),t.lottery_ticket=t.pearl+t.guild+t.lottery_ticket,t.coin=t.coin+t.lottery_ticket,0===t.coin?(e.getChildByName("noGetNode").getChildByName("tipsLabel").active=!0,e.getChildByName("noGetNode").getChildByName("tipsBonusLabel").getComponent(cc.Label).string="\u20b920",e.getChildByName("noGetNode").getChildByName("tipsBonusLabel").y=-17):(e.getChildByName("noGetNode").getChildByName("tipsLabel").active=!1,e.getChildByName("noGetNode").getChildByName("tipsBonusLabel").getComponent(cc.Label).string="\u20b9"+cc.vv.utils.getCoinValue(t.coin),e.getChildByName("noGetNode").getChildByName("tipsBonusLabel").y=0)}else e.getChildByName("noGetNode").getChildByName("tipsLabel").active=!0,e.getChildByName("noGetNode").getChildByName("tipsBonusLabel").getComponent(cc.Label).string="\u20b920",e.getChildByName("noGetNode").getChildByName("tipsBonusLabel").y=-17},getRankName:function(e){var t="";switch(Number(e)){case 0:return"None";case 1:case 2:case 3:case 4:case 5:t="Novice";break;case 6:case 7:case 8:case 9:case 10:t="Intermediate";break;case 11:case 12:case 13:case 14:case 15:t="Advanced";break;case 16:case 17:case 18:case 19:case 20:t="Professional";break;case 21:t="Master"}return t+" "+e},onListRender:function(e,t){var i=this.infoData.data_list[t];i&&(e.active=!0,null!=i.rank_no&&0!=Number(i.rank_no)||(i.rank_no=21),i.rank_no<4?(e.getChildByName("rankbg").active=!0,cc.vv.utils.setSpritFrame(e.getChildByName("rankbg").getComponent(cc.Sprite),"res/activity/image/rank"+i.rank_no,null,BUNDLEENUM.DRAGONGAME),e.getChildByName("rankLabel").active=!1):(e.getChildByName("rankbg").active=!1,e.getChildByName("rankLabel").active=!0,e.getChildByName("rankLabel").getComponent(cc.Label).string=i.rank_no>20?"20+":i.rank_no+""),e.getChildByName("nameLabel").getComponent(cc.Label).string=i.nickname,e.getChildByName("betLabel").getComponent(cc.Label).string="\u20b9"+cc.vv.utils.getCoinValueclub(i.rank_data),i.item_list&&i.item_list.length>0?e.getChildByName("totalLabel").getComponent(cc.Label).string="\u20b9 "+cc.vv.utils.getCoinValue(i.coin):e.getChildByName("totalLabel").getComponent(cc.Label).string="\u20b9 0",cc.vv.utils.setPlayerIcon("",i.face_url,e.getChildByName("mask").getChildByName("head").getComponent(cc.Sprite)),e.getChildByName("vipLogo")&&e.getChildByName("vipLogo").getComponent("vipLogo").setNewVip(i.player_id,i.vip))},getInfo:function(){var e=this;this.clickTime>0&&(new Date).getTime()-this.clickTime<300||(this.clickTime=(new Date).getTime(),cc.vv.httpRequest.Interface("api/tdkingnew/info",cc.vv.pbManager.hallProtoId.cmd_active_40_info_new,{},function(t){if(e.isValid&&t.response&&!t.response.err_no){e.infoData=t.response,e.infoData.page_count=isNaN(parseInt(e.infoData.page_count))?0:e.infoData.page_count,signal.emit("update_ticket",e.ticket);for(var i=0;i<e.infoData.data_list.length;i++){var n=e.infoData.data_list[i];n.tcoin=0,n.lottery_ticket=0,n.guild=0,n.pearl=0;for(var a=0;a<n.item_list.length;a++){var o=n.item_list[a];o.id==cc.vv.global.depositItemID?n.tcoin=cc.vv.utils.getCoinValueclub(Number(o.count)):o.id==cc.vv.global.withrawableItemID?n.jewel=cc.vv.utils.getCoinValueclub(Number(o.count)):o.id==cc.vv.global.lotteryItemID?n.lottery_ticket=cc.vv.utils.getCoinValueclub(Number(o.count)):o.id==cc.vv.global.guildItemID?n.guild=cc.vv.utils.getCoinValueclub(Number(o.count)):o.id==cc.vv.global.pearlItemID&&(n.pearl=cc.vv.utils.getCoinValueclub(Number(o.count)))}n.lottery_ticket=n.pearl+n.guild+n.lottery_ticket,n.coin=n.tcoin+n.lottery_ticket}e.updateUI()}}))},onDestroy:function(){signal&&signal.targetOff(this)},onBtnClicked:function(e){if(0!=cc.vv.utils.allowclick(.3)){var t=e.target.name;"backbtn"==t?this.hidePanel():"get_btn"==t?this.getDragonAward():"hide_tip"==t?this.awardTips.active=!1:"btn_close"==t?this.awardTips.active=!1:"rule_btn"==t&&this.showAwardTips()}},getDragonAward:function(){var e=this;this.clickTime>0&&(new Date).getTime()-this.clickTime<300||(this.clickTime=(new Date).getTime(),cc.vv.httpRequest.Interface("api/tdkingnew/award",cc.vv.pbManager.hallProtoId.cmd_active_40_award_new,{},function(t){if(e.isValid&&t.response&&!t.response.err_no&&(signal.emit("update_ticket",e.ticket),t.response.code&&1==t.response.code)){var i=e.node.getChildByName("uiNode").getChildByName("rankLayout").getChildByName("myItemNode");i.getChildByName("noGetNode").active=!0,i.getChildByName("getNode").active=!1,cc.vv.utils.showAward({coin:Number(t.response.info)/100}),cc.vv.userMgr.updateSelfDataByPHP(null,!0)}}))},showAwardTips:function(){this.awardTips.active=!0},update:function(){}}),cc._RF.pop()},{List:void 0,baseView:void 0}],dragonBankerReq:[function(e,t){"use strict";cc._RF.push(t,"c83c6xBl79PYILYnx/hLmyi","dragonBankerReq");var i=e("List");cc.Class({extends:e("baseView"),statics:{show:function(){var e=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);e?e.load("res/dragonBankerReq",cc.Prefab,function(e,t){if(!e&&t&&t instanceof cc.Prefab){var i=cc.instantiate(t);i.setPosition(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height/2),cc.director.getScene().addChild(i)}}):cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME)}},properties:{minLabel:cc.Label,cerLabel:cc.Label,maxLabel:cc.Label,scrollview:cc.ScrollView,list:i,bankerButton:cc.Node,slider:cc.Slider},onLoad:function(){this.minBanker=2e4,this.curvalue=this.minBanker,this.curvalue=100*parseInt(this.curvalue/100),this.minLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(this.minBanker),this.cerLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(this.curvalue),this.maxLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(cc.vv.userMgr.total_coin),signal.on("banker_list_ntf",this.updateBankerList,this),cc.vv.gameRequest.onBnakerListReq(),cc.vv.userMgr.total_coin>=this.minBanker&&(this.bankerButton.getComponent(cc.Button).interactable=!0,this.bankerButton.color=cc.color(255,255,255))},updateBankerList:function(){var e=cc.vv.gameControl.bankerList?cc.vv.gameControl.bankerList:[];this.bankerList=e,this.list.numItems=this.bankerList.length,this.scrollview.scrollToTop(.1)},onSlider:function(e){var t=cc.vv.userMgr.total_coin-this.minBanker;if(t>0){var i=Math.floor(e.progress*t)+this.minBanker;i>cc.vv.userMgr.total_coin&&(i=cc.vv.userMgr.total_coin),i<this.minBanker&&(i=this.minBanker),this.curvalue=i,this.curvalue=100*parseInt(this.curvalue/100),this.cerLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(this.curvalue)}},updatevaule:function(){this.maxLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(cc.vv.userMgr.total_coin);var e=cc.vv.userMgr.total_coin-this.minBanker;if(e>0){var t=Math.floor(this.slider.progress*e)+this.minBanker;t>cc.vv.userMgr.total_coin&&(t=cc.vv.userMgr.total_coin),t<this.minBanker&&(t=this.minBanker),this.curvalue=t,this.curvalue=100*parseInt(this.curvalue/100),this.cerLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(this.curvalue)}},onBtnClick:function(e){"bankerButton"==e.target.name?cc.vv.userMgr.total_coin>=this.minBanker?(cc.vv.gameRequest.applyUpBankerReq(this.curvalue),this.scheduleOnce(function(){this.updatevaule()},.1)):cc.vv.global.showclubShop(cc.vv.gameServer.clubId):"exitbtn"==e.target.name&&(cc.vv.gameRequest.cancelBnakerReq(e.target.info.id),this.scheduleOnce(function(){this.updatevaule()},.1))},onListRender:function(e,t){e.active=!0;var i=this.bankerList[t],n=e.getChildByName("markNode").getChildByName("photoSprite"),a=e.getChildByName("nameLabel"),o=e.getChildByName("goldLabel");a.getComponent(cc.Label).string=cc.vv.utils.subString2(i.seat_player.nickname,12),cc.vv.utils.setPlayerIcon(i.player_id,i.seat_player.face_url,n.getComponent(cc.Sprite)),o.getComponent(cc.Label).string="\u20b9"+cc.vv.utils.formatChipStr2(cc.vv.utils.getCoinValueclub(Number(i.coin))),e.getChildByName("vipLogo")&&e.getChildByName("vipLogo").getComponent("vipLogo").setNewVip(i.player_id,i.seat_player.vip),parseInt(i.player_id)==parseInt(cc.vv.userMgr.player_id)?(e.getChildByName("exitbtn").info=i,e.getChildByName("exitbtn").active=!0):e.getChildByName("exitbtn").active=!1},start:function(){},onDestroy:function(){signal.targetOff(this)}}),cc._RF.pop()},{List:void 0,baseView:void 0}],dragonBankerSup:[function(e,t){"use strict";cc._RF.push(t,"540c5iHmChLPZjHN8THo17z","dragonBankerSup"),cc.Class({extends:e("baseView"),statics:{show:function(e){var t=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);t?t.load("res/dragonBankerSup",cc.Prefab,function(t,i){if(!t&&i&&i instanceof cc.Prefab){var n=cc.instantiate(i);n.setPosition(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height/2),cc.director.getScene().addChild(n),n.getComponent("dragonBankerSup").showData(e)}}):cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME)}},properties:{minLabel:cc.Label,cerLabel:cc.Label,maxLabel:cc.Label,timeLabel:cc.Label},onLoad:function(){},showData:function(e){this.fill_min_coin=Number(e.fill_min_coin),this.fill_max_coin=cc.vv.userMgr.total_coin,100*parseInt(this.fill_min_coin/100)<this.fill_min_coin&&(this.fill_min_coin=this.fill_min_coin+100),this.curvalue=this.fill_min_coin,this.curvalue=100*parseInt(this.curvalue/100),this.minLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(this.fill_min_coin),this.cerLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(this.curvalue),this.maxLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(this.fill_max_coin),this.remain_time=e.remain_time,this.scheduleOnce(function(){this.hidePanel()}.bind(this),e.remain_time)},onSlider:function(e){var t=this.fill_max_coin-this.fill_min_coin;if(t>0){var i=Math.floor(e.progress*t)+this.fill_min_coin;i>this.fill_max_coin&&(i=this.fill_max_coin),i<this.fill_min_coin&&(i=this.fill_min_coin),this.curvalue=i,this.curvalue=100*parseInt(this.curvalue/100),this.cerLabel.string="\u20b9"+cc.vv.utils.formatChipStr2(this.curvalue)}},onBtnClick:function(e){"bankerButton"==e.target.name&&(cc.vv.gameRequest.applyFillBankerReq(this.curvalue),this.hidePanel())},start:function(){},update:function(e){this.remain_time=this.remain_time-e,this.remain_time>0?this.timeLabel.string=Math.floor(this.remain_time)+"s":this.timeLabel.string="0s"}}),cc._RF.pop()},{baseView:void 0}],dragonBankerTip:[function(e,t){"use strict";cc._RF.push(t,"a8473bRmJREn4BgR77fKpPj","dragonBankerTip"),cc.Class({extends:e("baseView"),statics:{show:function(e,t){var i=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);i?i.load("res/dragonBankerTip",cc.Prefab,function(i,n){if(!i&&n&&n instanceof cc.Prefab){var a=cc.instantiate(n);a.setPosition(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height/2),cc.director.getScene().addChild(a),a.getComponent("dragonBankerTip").showData(e,t)}}):cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME)}},properties:{sRichText:cc.RichText,noLabel:cc.Label,cannelButton:cc.Node,continusButton:cc.Node,confirmBtn:cc.Node},onLoad:function(){},onBtnClick:function(e){"cannelButton"==e.target.name?(cc.vv.gameRequest.applyDownBankerReq(),this.hidePanel()):(e.target.name,this.hidePanel())},showData:function(e,t){2==t?(this.sRichText.node.active=!0,this.noLabel.node.active=!1,this.sRichText.string=TXT("txt_11503",e.coin),this.confirmBtn.active=!1,this.cannelButton.active=!0,this.continusButton.active=!0):(this.sRichText.node.active=!1,this.noLabel.node.active=!0,this.confirmBtn.active=!0,this.cannelButton.active=!1,this.continusButton.active=!1),this.scheduleOnce(function(){this.hidePanel()}.bind(this),e.remain_time)},start:function(){}}),cc._RF.pop()},{baseView:void 0}],dragonBetArea:[function(e,t){"use strict";cc._RF.push(t,"509547f/mJPfahWargNqqk4","dragonBetArea"),cc.Class({extends:cc.Component,properties:{totalLab:cc.Label,myBetLab:cc.Label,winLight:cc.Node,betlight:cc.Node,betType:{type:DRAGON_BETTYPE,default:DRAGON_BETTYPE.EQUAL}},onLoad:function(){this.initTouchPanel(),this.cdTime=0,this.betlight.active=!1,this.totalLab.string="0",this.myBetLab.string="0",signal.on("update_desk_slot",this.updateBetChip,this),this.updateAreaLight()},updateBetChip:function(){this.totalLab.string=cc.vv.gameControl.getTotalSlotByType(this.betType),this.myBetLab.string=cc.vv.gameControl.getSelfSlotByType(this.betType),"0"==this.totalLab.string&&(this.totalLab.string="0"),"0"==this.myBetLab.string&&(this.myBetLab.string="0")},updateUI:function(){},start:function(){},addBet:function(){if(cc.vv.gameControl.gameStatus==DRAGON_STATUS.BETING){if(cc.vv.global.checkBaiRenBetLimit())return;if(cc.vv.userMgr.total_coin<1)return e("Tips").show(TXT("txt_11409")),void cc.vv.global.showclubShop(cc.vv.userMgr.club_id);var t=cc.vv.gameControl.getCurBetCost();cc.vv.gameControl.betType=this.betType,cc.vv.gameRequest.slotReq(this.betType,t),this.showAddBetLight()}},showWinLight:function(){this.winLight.active=!0},showAddBetLight:function(){this.betlight.active=!0,this.betlight.opacity=0,this.betlight.stopAllActions(),this.betlight.runAction(cc.sequence(cc.fadeIn(.15),cc.fadeOut(.15)))},hideLight:function(){this.winLight.active=!1},updateAreaLight:function(){cc.vv.gameControl?cc.vv.gameControl.gameStatus==DRAGON_STATUS.ENDING&&cc.vv.gameControl.gameWiner==this.betType?this.showWinLight():(cc.vv.gameControl.gameStatus,DRAGON_STATUS.BETING,this.hideLight()):this.winLight.active=!1},initTouchPanel:function(){this._touchId=null,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel.bind(this))},onTouchBegin:function(e){null===this._touchId&&(this._touchId=e.getID(),this.isTouchBegin=!0,this.issend=!1,this.touchtime=.3)},onTouchMove:function(e){e.stopPropagation(),e.getID(),this._touchId},onTouchEnd:function(e){e.getID()===this._touchId&&(this._touchId=null,this.isTouchBegin=!1,0==this.issend&&this.addBet(),e.stopPropagation())},onTouchCancel:function(e){e.getID()===this._touchId&&(this._touchId=null,this.isTouchBegin=!1,e.stopPropagation())},offTouchEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},onDestroy:function(){signal&&signal.targetOff(this),this.offTouchEvent()},update:function(e){this.cdTime-=e,this.cdTime<=0&&(this.updateBetChip(),this.cdTime=.5),this.isTouchBegin&&cc.vv.gameControl.gameStatus==DRAGON_STATUS.BETING&&(null==this.touchtime&&(this.touchtime=.3),this.touchtime-=e,this.touchtime<=0&&(this.touchtime=.3,this.issend=!0,this.addBet()))}}),cc._RF.pop()},{Tips:void 0}],dragonBetPanel:[function(e,t){"use strict";cc._RF.push(t,"9b330fJjaBCZ6/dIInK1MMg","dragonBetPanel"),cc.Class({extends:cc.Component,properties:{chipItem:cc.Prefab,chipPanel:cc.Node,seatPanel:cc.Node,chipframe:{default:[],type:[cc.SpriteFrame]},noSeatNode:cc.Node,selfNode:cc.Node},onLoad:function(){var e,t,i;this.seatManager=this.seatPanel.getComponent("dragonSeatMgr"),this.equalArea=this.node.getChildByName("equalArea"),this.idlerArea=this.node.getChildByName("idlerArea"),this.bankerArea=this.node.getChildByName("bankerArea"),this.betAreaMap=((e={})[DRAGON_BETTYPE.EQUAL]=this.equalArea.getComponent("dragonBetArea"),e[DRAGON_BETTYPE.IDLER]=this.idlerArea.getComponent("dragonBetArea"),e[DRAGON_BETTYPE.BANKER]=this.bankerArea.getComponent("dragonBetArea"),e),this.bankerPos=this.seatManager.banker.getPosition(),this.chipItemArr=((t={})[DRAGON_BETTYPE.EQUAL]=[],t[DRAGON_BETTYPE.IDLER]=[],t[DRAGON_BETTYPE.BANKER]=[],t),this.betAreaInfo=((i={})[DRAGON_BETTYPE.EQUAL]={pos:this.equalArea.getPosition(),size:this.equalArea.getContentSize()},i[DRAGON_BETTYPE.IDLER]={pos:this.idlerArea.getPosition(),size:this.idlerArea.getContentSize()},i[DRAGON_BETTYPE.BANKER]={pos:this.bankerArea.getPosition(),size:this.bankerArea.getContentSize()},i),this.chipPool=[];for(var n=0;n<11;n++)this.chipPool[n]=new cc.NodePool("dragonChipItem");signal.on("some_one_slot_ntf",this.someOneSlotAni,this),signal.on("outsome_one_slot_ntf",this.outsomeSlotAni,this),cc.director.getCollisionManager().enabled=!0},createDeskSlot:function(){var e=[],t=cc.vv.gameControl.total_slot[DRAGON_BETTYPE.EQUAL-1];t>0&&cc.vv.gameControl.splitTotalSlotChip(t,DRAGON_BETTYPE.EQUAL,e);var i=cc.vv.gameControl.total_slot[DRAGON_BETTYPE.IDLER-1];i>0&&cc.vv.gameControl.splitTotalSlotChip(i,DRAGON_BETTYPE.IDLER,e);var n=cc.vv.gameControl.total_slot[DRAGON_BETTYPE.BANKER-1];n>0&&cc.vv.gameControl.splitTotalSlotChip(n,DRAGON_BETTYPE.BANKER,e),this.createSomeChip(e),signal.emit("update_desk_slot")},resetDeskChip:function(){var e;this.chipItemArr=((e={})[DRAGON_BETTYPE.EQUAL]=[],e[DRAGON_BETTYPE.IDLER]=[],e[DRAGON_BETTYPE.BANKER]=[],e);for(var t=this.chipPanel.children,i=0;i<t.length;i++)this.recoverSimpleChip(t[i]),i--},createSomeChip:function(e){this.resetDeskChip();for(var t=0;t<e.length;t++){var i=e[t],n=this.getSimpleChip(i.chip_type,i.coin);n.setPosition(this.getRandomPosByType(i.pos)),n.playerid=0,this.chipPanel.addChild(n),this.chipItemArr[i.pos].push(n)}},getSeatPosByPlayerID:function(e){for(var t=0;t<cc.vv.gameControl.seatInfos.length;t++){var i=cc.vv.gameControl.seatInfos[t];if(i&&i.user&&parseInt(e)==parseInt(i.user.player_id))return i.seat.getPosition()}return this.noSeatNode.getPosition()},getRandomPosByType:function(e){var t,i=cc.size(58,108);t=e==DRAGON_BETTYPE.EQUAL?{pos:this.equalArea.getPosition(),size:this.equalArea.getContentSize()}:e==DRAGON_BETTYPE.IDLER?{pos:this.idlerArea.getPosition(),size:this.idlerArea.getContentSize()}:{pos:this.bankerArea.getPosition(),size:this.bankerArea.getContentSize()};for(var n=cc.v2(0,0),a=10;;){n.x=t.pos.x+cc.vv.utils.random(0,t.size.width-i.width)+i.width/2-t.size.width/2,n.y=t.pos.y+cc.vv.utils.random(0,t.size.height-i.height)+i.height/2-t.size.height/2;var o,c=this.chipPanel.convertToWorldSpaceAR(n);if(!(o=e==DRAGON_BETTYPE.EQUAL?this.equalArea.getComponent(cc.BoxCollider).world.points:e==DRAGON_BETTYPE.IDLER?this.idlerArea.getComponent(cc.BoxCollider).world.points:this.bankerArea.getComponent(cc.BoxCollider).world.points))break;if(cc.Intersection.pointInPolygon(c,o))break;if(--a<=0){n.x=t.pos.x,n.y=t.pos.y,e==DRAGON_BETTYPE.EQUAL&&(n.x=t.pos.x+cc.vv.utils.random(-100,100),n.y=t.pos.y-50+cc.vv.utils.random(-30,30));break}}return n},showFlyChipAni:function(e,t,i,n,a,o){var c=this.getRandomPosByType(t),s=this.getSimpleChip(i,n);s.setPosition(e),this.chipPanel.addChild(s),s.playerid=a||0,this.chipItemArr[t].push(s),s.stopAllActions(),s.runAction(cc.sequence([cc.delayTime(o),cc.moveTo(.8,c).easing(cc.easeExponentialOut())]))},outsomeSlotAni:function(e,t){for(var i=0;i<5;i++){var n=t[DRAGON_BETTYPE.EQUAL-1]?t[DRAGON_BETTYPE.EQUAL-1][i]:0,a=t[DRAGON_BETTYPE.IDLER-1]?t[DRAGON_BETTYPE.IDLER-1][i]:0,o=t[DRAGON_BETTYPE.BANKER-1]?t[DRAGON_BETTYPE.BANKER-1][i]:0;this.showSlotOut(n,a,o,i)}},showSlotOut:function(e,t,i,n){this.scheduleOnce(function(){var n=[];e&&e>0&&cc.vv.gameControl.splitTotalSlotChip(e,DRAGON_BETTYPE.EQUAL,n),t&&t>0&&cc.vv.gameControl.splitTotalSlotChip(t,DRAGON_BETTYPE.IDLER,n),i&&i>0&&cc.vv.gameControl.splitTotalSlotChip(i,DRAGON_BETTYPE.BANKER,n),n.length>0&&this.someOneSlotAni({player_id:-1,seat_id:-1,slot_list:n})}.bind(this),.2*n)},someOneSlotAni:function(e){var t=cc.v2(0,0);t=parseInt(e.player_id)==parseInt(cc.vv.userMgr.player_id)?this.selfNode.getPosition():this.getSeatPosByPlayerID(e.player_id);for(var i=0;i<e.slot_list.length;i++){var n=e.slot_list[i];this.showFlyChipAni(t,n.pos,n.chip_type,n.coin,parseInt(e.player_id)),n.coin}(null==this.flysound||this.flysound<=0)&&(this.flysound=.1,cc.vv.audioMgr.playSFX("fly",null,BUNDLEENUM.DRAGONGAME))},gameSettle:function(e){for(var t={},i={},n=0;n<e.pos_win_list.length;n++){var a=e.pos_win_list[n];a.total_win=cc.vv.utils.getCoinValueclub(Number(a.total_win)),i[a.pos]=a.total_win,a.total_win>0&&a.total_win;for(var o=0;o<a.seat_win_list.length;o++){var c=a.seat_win_list[o];c.coin=cc.vv.utils.getCoinValueclub(Number(c.coin)),t[c.player_id]||(t[c.player_id]=[]),t[c.player_id].push({player_id:c.player_id,pos:a.pos,coin:c.coin,seat_id:c.seat_id})}}e.banker_win=cc.vv.utils.getCoinValueclub(Number(e.banker_win)),e.banker_win,this.scheduleOnce(function(){this.showIdlerFlyChip(t,i)}.bind(this),1)},showBankerFlyChip:function(e){var t=this,i=[],n=[],a=cc.vv.gameControl.gameWiner;a==DRAGON_BETTYPE.EQUAL||(a==DRAGON_BETTYPE.BANKER?(Array.prototype.push.apply(i,this.chipItemArr[DRAGON_BETTYPE.EQUAL]),Array.prototype.push.apply(n,this.chipItemArr[DRAGON_BETTYPE.IDLER]),this.chipItemArr[DRAGON_BETTYPE.EQUAL]=[],this.chipItemArr[DRAGON_BETTYPE.IDLER]=[]):a==DRAGON_BETTYPE.IDLER&&(Array.prototype.push.apply(i,this.chipItemArr[DRAGON_BETTYPE.EQUAL]),Array.prototype.push.apply(n,this.chipItemArr[DRAGON_BETTYPE.BANKER]),this.chipItemArr[DRAGON_BETTYPE.EQUAL]=[],this.chipItemArr[DRAGON_BETTYPE.BANKER]=[]));var o=!1,c=0;if(0==i.length);else{for(var s=function(){var e=i[r];e.stopAllActions(),e.runAction(cc.sequence([cc.delayTime(c),cc.moveTo(.8,t.bankerPos).easing(cc.easeExponentialOut()),cc.callFunc(function(){t.recoverSimpleChip(e)})])),c<.2?c+=.008:c=0},r=0;r<i.length;r++)s();o=!0}if(0==n.length);else{c=0;for(var l=function(){var e=n[d];e.stopAllActions(),e.runAction(cc.sequence([cc.delayTime(c),cc.moveTo(.8,t.bankerPos).easing(cc.easeExponentialOut()),cc.callFunc(function(){t.recoverSimpleChip(e)})])),c<.2?c+=.008:c=0},d=0;d<n.length;d++)l();o=!0}return o&&(this.scheduleOnce(function(){this.seatManager.updateBanker(),this.seatManager.showBankerSp(e)}.bind(this),.8),cc.vv.audioMgr.playSFX("overfly",null,BUNDLEENUM.DRAGONGAME)),signal.emit("update_banker_info"),o},showBankerLoseChip:function(){var e=!1,t=cc.vv.gameControl.gameWiner,i=[],n=1;if(t==DRAGON_BETTYPE.EQUAL){for(var a=0;a<this.chipItemArr[DRAGON_BETTYPE.EQUAL].length;a++){var o=this.chipItemArr[DRAGON_BETTYPE.EQUAL][a];i.push(o)}cc.vv.gameControl.total_slot[DRAGON_BETTYPE.EQUAL-1],n=DRAGON_BETTYPE.EQUAL}else if(t==DRAGON_BETTYPE.BANKER){for(var c=0;c<this.chipItemArr[DRAGON_BETTYPE.BANKER].length;c++){var s=this.chipItemArr[DRAGON_BETTYPE.BANKER][c];i.push(s)}cc.vv.gameControl.total_slot[DRAGON_BETTYPE.BANKER-1],n=DRAGON_BETTYPE.BANKER}else if(t==DRAGON_BETTYPE.IDLER){for(var r=0;r<this.chipItemArr[DRAGON_BETTYPE.IDLER].length;r++){var l=this.chipItemArr[DRAGON_BETTYPE.IDLER][r];i.push(l)}cc.vv.gameControl.total_slot[DRAGON_BETTYPE.IDLER-1],n=DRAGON_BETTYPE.IDLER}if(i.length>0){for(var d=0,h=0;h<i.length;h++){var u=i[h],p=this.getRandomPosByType(n),_=this.getSimpleChip(u.chipType,u.coin);_.setPosition(this.bankerPos),this.chipPanel.addChild(_),_.playerid=u.playerid,this.chipItemArr[n].push(_),_.stopAllActions(),_.runAction(cc.sequence([cc.delayTime(.1+d),cc.fadeIn(.01),cc.moveTo(.8,p).easing(cc.easeExponentialOut())])),d<.2?d+=.008:d=0}cc.vv.audioMgr.playSFX("overfly",null,BUNDLEENUM.DRAGONGAME),e=!0}return e},findChipItem:function(e,t,i){for(var n=this.chipItemArr[e],a=null,o=0;o<n.length;o++){var c=n[o];if(c.chipType==t){a=c,n.splice(o,1);break}}return a||(a=this.getSimpleChip(t,i)).setPosition(this.getRandomPosByType(e)),a},flyIdlerWinGold:function(e){var t=this,i=[];cc.vv.gameControl.splitTotalSlotChip(e.coin,e.pos,i);var n=cc.v2(0,0);n=parseInt(cc.vv.userMgr.player_id)==parseInt(e.player_id)?this.selfNode.getPosition():this.getSeatPosByPlayerID(e.player_id);for(var a=function(){var a=t.findChipItem(e.pos,i[o].chip_type,i[o].coin);a.stopAllActions(),a.runAction(cc.sequence(cc.delayTime(.8),cc.fadeIn(.01),cc.moveTo(.8,n).easing(cc.easeExponentialOut()),cc.callFunc(function(){t.recoverSimpleChip(a)})))},o=0;o<i.length;o++)a()},isPlayer:function(e){for(var t=0;t<cc.vv.gameControl.seatInfos.length;t++){var i=cc.vv.gameControl.seatInfos[t];if(i&&i.user){if(parseInt(e)==parseInt(cc.vv.userMgr.player_id))return 2;if(parseInt(e)==parseInt(i.user.player_id))return 1}}return 0},getChipItemBackPos:function(e,t){var i=t.x>e.x?e.x-50:e.x+50,n=t.y>e.y?e.y-10:e.y+10;return cc.v2(i,n)},showIdlerFlyChip:function(e,t){var i=this,n=[],a=[],o=[],c=!1;for(var s in this.chipItemArr){for(var r=0;r<this.chipItemArr[s].length;r++){var l=this.chipItemArr[s][r],d=l,h=this.isPlayer(d.playerid);cc.vv.gameControl.gameWiner!=s&&(h=0),1==h?(l.ismove=!1,n.push(l)):2==h?a.push(l):o.push(l)}this.chipItemArr[s]=[]}for(var u=0,p=0,_=[],g=function(){var a=cc.vv.gameControl.seatInfos[m];if(!a||!a.user)return"continue";if(parseInt(a.user.player_id)==parseInt(cc.vv.userMgr.player_id))return"continue";var o=e[a.user.player_id];if(!o)return"continue";for(var s=!1,r=0;r<_.length;r++)if(_[r]==a.user.player_id){s=!0;break}if(s)return"continue";_.push(a.user.player_id);for(var l=0,d=function(e){var c=o[e];t[c.pos]-=c.coin,l+=c.coin,c.seat_id=a.user.seat_id;var s=!1;u=0;for(var r=function(){var e=n[d];if(e.playerid==c.player_id&&0==e.ismove){s=!0,e.ismove=!0;var t=i.getSeatPosByPlayerID(c.player_id),a=i.getChipItemBackPos(e,t);e.runAction(cc.sequence(cc.delayTime(.8+u),cc.fadeIn(.01),cc.moveTo(.5,a).easing(cc.easeExponentialOut()),cc.moveTo(.8,t).easing(cc.easeExponentialOut()),cc.callFunc(function(){i.recoverSimpleChip(e)}))),(u+=.008)>.2&&(u=0)}},d=0;d<n.length;d++)r();p<u&&(p=u),0==s&&i.flyIdlerWinGold(c),setTimeout(function(){e==o.length-1&&signal.emit("show_winlose",{coin:l,player_id:c.player_id})},1600)},h=0;h<o.length;h++)d(h);c=!0},m=0;m<cc.vv.gameControl.seatInfos.length;m++)g();var v=e[cc.vv.userMgr.player_id];if(v){cc.log("\u81ea\u5df12",v);var f=0,y=!1;u=0;for(var N=function(){var e=a[C];y=!0;var t=i.selfNode.getPosition(),n=i.getChipItemBackPos(e,t);e.runAction(cc.sequence(cc.delayTime(.8+u),cc.fadeIn(.01),cc.moveTo(.5,n).easing(cc.easeExponentialOut()),cc.moveTo(.8,t).easing(cc.easeExponentialOut()),cc.callFunc(function(){i.recoverSimpleChip(e)}))),(u+=.008)>.2&&(u=0)},C=0;C<a.length;C++)N();p<u&&(p=u);for(var T=function(e){var n=v[e];t[n.pos]-=n.coin,f+=n.coin,n.seat_id=cc.vv.gameControl.mySeatInfo.user.seat_id,0==y&&i.flyIdlerWinGold(n),setTimeout(function(){e==v.length-1&&(signal.emit("show_winlose",{coin:f,player_id:n.player_id}),i.seatManager.showSelfSp())},1600)},b=0;b<v.length;b++)T(b);a=[],c=!0}if(a.length>0){u=0;for(var R=function(){var e=a[E];A=!0;var t=i.noSeatNode.getPosition(),n=i.getChipItemBackPos(e,t);e.runAction(cc.sequence(cc.delayTime(.8+u),cc.fadeIn(.01),cc.moveTo(.5,n).easing(cc.easeExponentialOut()),cc.moveTo(.8,t).easing(cc.easeExponentialOut()),cc.callFunc(function(){i.recoverSimpleChip(e)}))),(u+=.008)>.2&&(u=0)},E=0;E<a.length;E++)R();p<u&&(p=u),c=!0}var A=!1;u=0;for(var S=function(){var e=o[B];A=!0;var t=i.noSeatNode.getPosition(),n=i.getChipItemBackPos(e,t);e.runAction(cc.sequence(cc.delayTime(.8+u),cc.fadeIn(.01),cc.moveTo(.5,n).easing(cc.easeExponentialOut()),cc.moveTo(.8,t).easing(cc.easeExponentialOut()),cc.callFunc(function(){i.recoverSimpleChip(e)}))),(u+=.008)>.6&&(u=0)},B=0;B<o.length;B++)S();if(p<u&&(p=u),A&&(c=!0,setTimeout(function(){i.isValid&&i.seatManager.showNoSeatSp()},1600)),o=[],0==A)for(var I in t)t[I]&&t[I]>0&&(this.flyIdlerWinGold({player_id:0,pos:I,coin:t[I],seat_id:0}),c=!0);else c=!0;c&&this.scheduleOnce(function(){cc.vv.audioMgr.playSFX("overfly",null,BUNDLEENUM.DRAGONGAME)}.bind(this),.8),this.scheduleOnce(function(){signal.emit("fly_record_ntf")}.bind(this),3);for(var L=function(){var e=n[k];0==e.ismove&&e.runAction(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){i.recoverSimpleChip(e)}))),e.ismove=!1},k=0;k<n.length;k++)L();n=[]},updateAreaLight:function(){for(var e in this.betAreaMap)this.betAreaMap[e]&&this.betAreaMap[e].updateAreaLight()},setAreaLight:function(){for(var e in this.betAreaMap)this.betAreaMap[e]&&this.betAreaMap[e].betType==cc.vv.gameControl.gameWiner&&this.betAreaMap[e].showWinLight()},getSimpleChip:function(e,t){if(e||(e=0),!(this.chipPool[e].size()>0)){var i=new cc.Node;return i.addComponent(cc.Sprite).spriteFrame=this.chipframe[e],i.chipType=e,i.coin=t,i}var n=this.chipPool[e].get();return n.chipType=e,n.coin=t,n},recoverSimpleChip:function(e){e&&cc.isValid(e)&&(e.stopAllActions(),e.playerid=0,this.chipPool[e.chipType].put(e))},start:function(){},onDestroy:function(){for(var e=0;e<this.chipPool.length;e++)this.chipPool[e].clear();signal&&signal.targetOff(this),cc.director.getCollisionManager().enabled=!1},update:function(e){this.flysound&&this.flysound>0&&(this.flysound=this.flysound-e)}}),cc._RF.pop()},{}],dragonChatPanel:[function(e,t){"use strict";cc._RF.push(t,"b97e5e6OEdJGL7OMZnuUwCg","dragonChatPanel"),cc.Class({extends:cc.Component,properties:{panelArr:{default:[],type:cc.Node},itemArr:{default:[],type:cc.Node},texture:{default:void 0,type:cc.SpriteAtlas},chatEditBox:cc.EditBox,leftLabel:cc.Label},onLoad:function(){for(var e=0;e<this.itemArr.length;e++)this.itemArr[e].removeFromParent();this.initChatPanel();for(var t=0;t<this.panelArr.length;t++)this.panelArr[t].active=0==t;this.orginy=this.node.getChildByName("bg").y},initChatPanel:function(){this.comtxt=cc.vv.global.DRAGON_TXTS;for(var e=this.panelArr[0].getComponent(cc.ScrollView).content,t=this.itemArr[0],i=0;i<this.comtxt.length;i++){var n=cc.instantiate(t);n.name=""+(i+1),n.getChildByName("lab").getComponent(cc.Label).string=TXT(this.comtxt[i]),e.addChild(n)}e.getComponent(cc.Layout).updateLayout(),e.getComponent(cc.Layout).enabled=!1,e=this.panelArr[1].getComponent(cc.ScrollView).content,t=this.itemArr[1];for(var a=0;a<12;a++){var o=cc.instantiate(t);o.name=""+(a+1),e.addChild(o),o.getComponentInChildren(cc.Sprite).spriteFrame=this.texture.getSpriteFrame("bjl-em0ij-"+(a+1))}},ctextChange:function(){var e=this.chatEditBox.string,t=20-cc.vv.utils.getBytesLength(e);t<0?(t=0,this.chatEditBox.string=this.oldvalue):this.oldvalue=e},onBtnClickcutom:function(){var t=this.chatEditBox.string;""!=t&&(cc.vv.utils.getBytesLength(t)>20?e("Tips").show("Enter a maximum of 20 words"):(cc.vv.gameRequest.sendChatcustomReq(3,t),this.node.active=!1))},onBtnClickedToggle:function(e,t){t=parseInt(t),cc.vv.audioMgr.playSFX("btn3");for(var i=0;i<this.panelArr.length;i++)this.panelArr[i].active=i==t},onBtnClickedEmoji:function(e){cc.vv.audioMgr.playSFX("btn3"),cc.log(e.target.name),cc.vv.gameRequest.sendChatReq(2,parseInt(e.target.name)),this.node.active=!1},onBtnClickedQuick:function(e){cc.vv.audioMgr.playSFX("btn3"),cc.log(e.target.name),cc.vv.gameRequest.sendChatReq(1,parseInt(e.target.name)),this.node.active=!1},onEnable:function(){this.node.getChildByName("bg").getChildByName("toggleContainer").getChildByName("quick").getComponent(cc.Toggle).isChecked=!0;for(var e=0;e<this.panelArr.length;e++)this.panelArr[e].active=0==e;this.chatEditBox.string="",this.oldvalue="";var t=cc.view.getVisibleSize();this.orginy=6-(t.height/2-this.node.getChildByName("bg").height/2),this.node.getChildByName("bg").stopAllActions(),this.node.getChildByName("bg").y=-1e3,this.node.getChildByName("bg").runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,this.orginy)),cc.callFunc(function(){},this)))},hideSelf:function(){this.node.getChildByName("bg").stopAllActions(),this.node.getChildByName("bg").runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,-1e3)),cc.callFunc(function(){this.node.active=!1},this)))},start:function(){},onDestroy:function(){signal&&signal.targetOff(this)}}),cc._RF.pop()},{Tips:void 0}],dragonChipItem:[function(e,t){"use strict";cc._RF.push(t,"ad872+a3KRInphwUKMg7ID5","dragonChipItem"),cc.Class({extends:cc.Component,properties:{chipType:1,playerid:0,coin:0},onLoad:function(){},init:function(e,t,i){this.chipType=t,this.coin=i,this.node.getComponent(cc.Sprite).spriteFrame=e.chipframe[t]},getSimpleCoin:function(e){return e>=1e6?Math.ceil(e/1e6)+"M":e>=1e3?Math.ceil(e/1e3)+"K":e},getType:function(){return this.chipType},unuse:function(){this.node.removeFromParent()},reuse:function(){},start:function(){},update:function(){}}),cc._RF.pop()},{}],dragonDetailMgr:[function(e,t){"use strict";cc._RF.push(t,"9dfedPsZw1NXqZx5TJ4zkFL","dragonDetailMgr"),cc.Class({extends:cc.Component,properties:{playerclickNode:cc.Node,detail_player:cc.Node,detailNodes:{default:[],type:[cc.Node]},photo:cc.Sprite,nameLabel:cc.Label,goldLabel:cc.Label,idLabel:cc.Label,headbox:{default:[],type:[cc.Node]}},onLoad:function(){this.playerclickNode.active=!1,this.detail_player.active=!1,signal.on("dragon_seat_detail",this.showDeatil,this)},showDeatil:function(e,t){this.playerclickNode.active=!0,this.detail_player.active=!0,this.detail_player.x=this.detailNodes[e].x,this.detail_player.y=this.detailNodes[e].y,t&&(cc.vv.utils.setPlayerIcon(t.player_id,t.face_url,this.photo),this.nameLabel.string=cc.vv.utils.subString2(t.nickname,12),this.goldLabel.string=cc.vv.utils.formatChipStr(t.coin),this.idLabel.string="ID:"+t.player_id);for(var i=0;i<this.headbox.length;i++)this.headbox[i].active=!1;0==e?this.headbox[0].active=!0:1==e?this.headbox[1].active=!0:this.headbox[2].active=!0},onBtnClicked:function(e){"playerclickNode"==e.target.name&&(this.playerclickNode.active=!1,this.detail_player.active=!1)},start:function(){}}),cc._RF.pop()},{}],dragonEffectPanel:[function(e,t){"use strict";cc._RF.push(t,"fe9f51sCMNKVoIMmDNnmJ+V","dragonEffectPanel"),cc.Class({extends:cc.Component,properties:{noSeatNode:cc.Node,mySeatNode:cc.Node,bankerNode:cc.Node,tips:cc.Node,spineStartBet:sp.Skeleton,spineVs:sp.Skeleton,card_1:cc.Node,card_2:cc.Node,dragonbackcard:cc.SpriteFrame,trigerbackcard:cc.SpriteFrame,dragonfacecard:cc.SpriteFrame,trigerfacecard:cc.SpriteFrame,zdxarr:{default:[],type:[cc.Node]},sp_zdx:{default:[],type:[cc.Node]},effectbg:cc.Node,sp_dragon_win:sp.Skeleton,sp_tiger_win:sp.Skeleton,sp_tie_win:sp.Skeleton,redvalue:{default:[],type:[cc.SpriteFrame]},blackvalue:{default:[],type:[cc.SpriteFrame]},minarr:{default:[],type:[cc.SpriteFrame]},suitarr:{default:[],type:[cc.SpriteFrame]}},onLoad:function(){var e=this;this.effectbg.active=!1;for(var t=0;t<this.zdxarr.length;t++)this.zdxarr[t].active=!1;for(var i=0;i<this.sp_zdx.length;i++)this.sp_zdx[i].active=!1;this.bankerPos=this.node.convertToNodeSpaceAR(this.bankerNode.parent.convertToWorldSpaceAR(this.bankerNode.getPosition())),signal.on("show_mofa",this.showMofa.bind(this),this),signal.on("other_fill_banker",this.showOtherFillBanker.bind(this),this),signal.on("gtim_start_voice",this.gtimvoice_ntf.bind(this),this),signal.on("gtim_end_voice",this.gtimvoiceEnd_ntf.bind(this),this),this.spineStartBet.clearTracks(),this.spineStartBet.setCompleteListener(function(){e.spineStartBet.node.active=!1}),this.spineStartBet.node.active=!1,this.spineVs.clearTracks(),this.spineVs.setCompleteListener(function(){e.spineVs.node.active=!1,e.sendCard(),e.effectbg.active=!1}),this.spineVs.node.active=!1,this.sp_dragon_win.clearTracks(),this.sp_dragon_win.setCompleteListener(function(){e.sp_dragon_win.node.active=!1}),this.sp_dragon_win.node.active=!1,this.sp_tiger_win.clearTracks(),this.sp_tiger_win.setCompleteListener(function(){e.sp_tiger_win.node.active=!1}),this.sp_dragon_win.node.active=!1,this.sp_tie_win.clearTracks(),this.sp_tie_win.setCompleteListener(function(){e.sp_tie_win.node.active=!1}),this.sp_tie_win.node.active=!1,this.card_1.getChildByName("sp_fire").active=!1,this.card_1.getChildByName("sp_win").active=!1,this.card_2.getChildByName("sp_fire").active=!1,this.card_2.getChildByName("sp_win").active=!1},showzdx:function(e){var t=this,i=cc.instantiate(this.sp_zdx[0]);i.active=!0,this.node.addChild(i),i.getComponent(cc.Animation).once(cc.Animation.EventType.FINISHED,function(){i.destroy(),t.zdxarr[e-1].active=!0}),1==e?i.getComponent(cc.Animation).play("dragonzdx_1Clip"):2==e?i.getComponent(cc.Animation).play("dragonzdx_2Clip"):i.getComponent(cc.Animation).play("dragonzdx_3Clip")},showVs:function(){this.effectbg.active=!0,cc.vv.audioMgr.playSFX("vs",null,BUNDLEENUM.DRAGONGAME),this.spineVs.node.active=!0,this.spineVs.setAnimation(0,"animation",!1)},showStartBet:function(){cc.vv.audioMgr.playSFX("vs",null,BUNDLEENUM.DRAGONGAME),this.spineStartBet.node.active=!0,this.spineStartBet.setAnimation(0,"ani_start",!1)},showStopBet:function(){this.spineStartBet.node.active=!0,this.spineStartBet.setAnimation(0,"ani_stop",!1)},sendCard:function(){this.card_1.active=!0,this.card_2.active=!0,this.card_1.getChildByName("dragoncard").destroyAllChildren(),this.card_2.getChildByName("dragoncard").destroyAllChildren(),this.card_1.getChildByName("dragoncard").getComponent(cc.Sprite).spriteFrame=this.dragonbackcard,this.card_2.getChildByName("dragoncard").getComponent(cc.Sprite).spriteFrame=this.trigerbackcard,this.card_1.getChildByName("dragoncard").getComponent(cc.Animation).play("dragonsend1Clip"),this.card_2.getChildByName("dragoncard").getComponent(cc.Animation).play("dragonsend2Clip"),this.scheduleOnce(function(){this.card_1.getChildByName("sp_fire").active=!0,this.card_2.getChildByName("sp_fire").active=!0,this.showStartBet()}.bind(this),.34)},setBackCard:function(){this.card_1.active=!0,this.card_2.active=!0,this.card_1.getChildByName("dragoncard").destroyAllChildren(),this.card_2.getChildByName("dragoncard").destroyAllChildren(),this.card_1.getChildByName("dragoncard").getComponent(cc.Sprite).spriteFrame=this.dragonbackcard,this.card_2.getChildByName("dragoncard").getComponent(cc.Sprite).spriteFrame=this.trigerbackcard,this.card_1.getChildByName("sp_fire").active=!0,this.card_2.getChildByName("sp_fire").active=!0},showCard:function(e,t,i){this.card_1.active=!0,this.card_2.active=!0,this.scheduleOnce(function(){this.card_1.getChildByName("sp_fire").active=!1,this.card_2.getChildByName("sp_fire").active=!1,cc.vv.audioMgr.playSFX("opencard",null,BUNDLEENUM.DRAGONGAME),this.card_1.getChildByName("dragoncard").getComponent(cc.Animation).play("dragoncardfilpClip"),this.scheduleOnce(function(){this.setCard(this.card_1.getChildByName("dragoncard").getComponent(cc.Sprite),1,e)}.bind(this),.42),this.scheduleOnce(function(){}.bind(this),.84)}.bind(this),.3),this.scheduleOnce(function(){cc.vv.audioMgr.playSFX("opencard",null,BUNDLEENUM.DRAGONGAME),this.card_2.getChildByName("dragoncard").getComponent(cc.Animation).play("dragoncardfilpClip"),this.scheduleOnce(function(){this.setCard(this.card_2.getChildByName("dragoncard").getComponent(cc.Sprite),2,t)}.bind(this),.42),this.scheduleOnce(function(){}.bind(this),.84)}.bind(this),1.64),this.scheduleOnce(function(){2==i?(this.card_1.getChildByName("sp_win").active=!0,cc.vv.audioMgr.playSFX("dragonwin",null,BUNDLEENUM.DRAGONGAME),this.sp_dragon_win.node.active=!0,this.sp_dragon_win.setAnimation(0,"long",!1)):3==i?(this.card_2.getChildByName("sp_win").active=!0,cc.vv.audioMgr.playSFX("tigerwin",null,BUNDLEENUM.DRAGONGAME),this.sp_tiger_win.node.active=!0,this.sp_tiger_win.setAnimation(0,"hu",!1)):(this.card_1.getChildByName("sp_win").active=!0,this.card_2.getChildByName("sp_win").active=!0)}.bind(this),3.18)},gtimvoice_ntf:function(e){var t=e.split("_");if(t.length>0&&"playvoice"==t[0]){var i=parseInt(t[1]),n=parseInt(t[2]);if(i==cc.vv.userMgr.player_id)return void signal.emit("gtim_show_myselfe_voice",n);for(var a=0;a<cc.vv.gameControl.seatInfos.length;a++){var o=cc.vv.gameControl.seatInfos[a];if(o&&o.user&&parseInt(o.user.player_id)==i){o.com.showvoice(n);break}}}},gtimvoiceEnd_ntf:function(){if(this.recordArr&&this.recordArr.length>0){var e=this.recordArr.shift();gtimSDK.onclick_play_url(e.voice_content,"playvoice_"+e.player_id+"_"+e.voice_time)}},SomeOneChat:function(e){if(4!=e.chat_type){if(1==e.chat_type){var t={};t.txt=e.nickname+":"+e.chat_str,t.nickname=e.nickname,t.player_id=e.player_id,signal.emit("scroll_msg_insert",t)}else if(2==e.chat_type&&e.id>0&&e.id<=12){var i={};i.aniID="br-emoji"+e.id,i.txt=e.nickname+":",i.nickname=e.nickname,i.player_id=e.player_id,signal.emit("scroll_msg_insert",i)}else if(3==e.chat_type){var n={};n.txt=e.nickname+":"+e.chat_str,n.nickname=e.nickname,n.player_id=e.player_id,signal.emit("scroll_msg_insert",n)}}else gtimSDK.isrecord?(null==this.recordArr&&(this.recordArr=[]),this.recordArr.push(e)):gtimSDK.onclick_play_url(e.voice_content,"playvoice_"+e.player_id+"_"+e.voice_time)},showMofa:function(e){cc.vv.userMgr.updateSelfDataByPHP();for(var t=1==e.type?1:8,i=null,n=null,a=0;a<cc.vv.gameControl.seatInfos.length;a++){var o=cc.vv.gameControl.seatInfos[a];if(o&&o.user&&parseInt(o.user.player_id)==parseInt(e.player_id)){i=o.seat.getPosition();break}}if(parseInt(e.player_id)==parseInt(cc.vv.userMgr.player_id)?i=this.node.convertToNodeSpaceAR(this.mySeatNode.parent.convertToWorldSpaceAR(this.mySeatNode.getPosition())):null==i&&(i=this.node.convertToNodeSpaceAR(this.noSeatNode.parent.convertToWorldSpaceAR(this.noSeatNode.getPosition()))),1==e.type){if(parseInt(e.target_player)==parseInt(cc.vv.userMgr.player_id))n=this.node.convertToNodeSpaceAR(this.mySeatNode.parent.convertToWorldSpaceAR(this.mySeatNode.getPosition()));else for(var c=0;c<cc.vv.gameControl.seatInfos.length;c++){var s=cc.vv.gameControl.seatInfos[c];if(s&&s.user&&parseInt(s.user.player_id)==parseInt(e.target_player)){n=s.seat.getPosition();break}}if(!i||!n)return;for(var r=0;r<t;r++){var l=new cc.Node("mofa");l.x=i.x,l.y=i.y,this.node.addChild(l),7==e.id&&n.x>0&&(l.scaleX=-1),cc.vv.gameCfg.playFishAniByKey("mofa"+e.id,l,BUNDLEENUM.LOBBYPACK);var d=cc.jumpTo(.8,cc.v2(n.x,n.y),100,1),h=cc.callFunc(function(){cc.vv.audioMgr.playMofa(e.id)},this),u=[];u.push(cc.delayTime(1)),u.push(d),u.push(h),u.push(cc.delayTime(2)),u.push(cc.callFunc(function(e){e.destroy()})),l.runAction(cc.sequence(u))}}},showOtherFillBanker:function(){this.tips.getComponent(cc.Label).string=TXT("txt_11407"),this.tips.active=!0},setCard:function(e,t,i){if(0!=i){e.spriteFrame=1==t?this.dragonfacecard:this.trigerfacecard;var n=i>>4,a=15&i,o="",c="",s="";if(0==n?(s="poker_icon_s_diamond",o="red_"+a,c="poker_icon_l_diamond",11==a?c="poker_icon_j_1":12==a?c="poker_icon_q_1":13==a&&(c="poker_icon_k_1")):1==n?(s="poker_icon_s_club",o="black_"+a,c="poker_icon_l_club",11==a?c="poker_icon_j_1":12==a?c="poker_icon_q_1":13==a&&(c="poker_icon_k_1")):2==n?(s="poker_icon_s_heart",o="red_"+a,c="poker_icon_l_heart",11==a?c="poker_icon_j_2":12==a?c="poker_icon_q_2":13==a&&(c="poker_icon_k_2")):3==n&&(s="poker_icon_s_spade",o="black_"+a,c="poker_icon_l_spade",11==a?c="poker_icon_j_2":12==a?c="poker_icon_q_2":13==a&&(c="poker_icon_k_2")),""!=o){var r=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);if(!r)return void cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME);r.load("res/poker/"+o,cc.SpriteFrame,function(t,i){if(!t&&e.isValid){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=i,e.node.addChild(n),n.x=-41,n.y=53}})}if(""!=s){var l=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);if(!l)return void cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME);l.load("res/poker/"+s,cc.SpriteFrame,function(t,i){if(!t&&e.isValid){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=i,e.node.addChild(n),n.x=-40,n.y=8}})}if(""!=c){var d=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);if(!d)return void cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME);d.load("res/poker/"+c,cc.SpriteFrame,function(t,i){if(!t&&e.isValid){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=i,e.node.addChild(n),n.x=3,n.y=-18,a<11&&(n.x=18,n.y=-35)}})}}else e.spriteFrame=1==t?this.dragonbackcard:this.trigerbackcard},update:function(){if(cc.vv.gameControl)switch(cc.vv.gameControl.gameStatus){case DRAGON_STATUS.WAITING:break;default:this.tips.active=!1}else this.tips.active=!1},reset:function(){this.card_1.active=!1,this.card_2.active=!1,this.card_1.getChildByName("sp_fire").active=!1,this.card_1.getChildByName("sp_win").active=!1,this.card_2.getChildByName("sp_fire").active=!1,this.card_2.getChildByName("sp_win").active=!1;for(var e=0;e<this.zdxarr.length;e++)this.zdxarr[e].active=!1;for(var t=0;t<this.sp_zdx.length;t++)this.sp_zdx[t].active=!1},onDestroy:function(){signal&&signal.targetOff(this)}}),cc._RF.pop()},{}],dragonErrorHandler:[function(e,t){"use strict";cc._RF.push(t,"f9c3e5uATlMlLLriAj6KhS/","dragonErrorHandler"),t.exports={ERR_UNKNOW:-1,ERR_INVALID_PARAMS:-2,ERR_REPEAT_LOGIN:1,ERR_LOGIN_TOKEN:2,ERR_ENTER_TABLE:3,ERR_TABLE_NO_EXIST:4,ERR_GM_ERROR:5,ERR_NEW_CLIENT_LOGIN:6,ERR_PLAY_GAME_NOW:7,ERR_COIN_NOT_ENOUGH:8,ERR_NOT_IN_TABLE:9,ERR_COIN_LESS_ROOM:10,ERR_COIN_GREATER_ROOM:11,ERR_CLOTHE_NOT_EXIST:18,ERR_CLOTHE_PAST:19,ERR_RECONNET_TABLE:21,ERR_PVP_FREE_TOO_LONG:39,ERR_PLAYER_NOT_EXIST:42,ERR_ENTER_ROOM_DATA:43,ERR_ENTER_SVR:44,ERR_ENTER_GAME_TYPE:45,ERR_ENTER_ROOM_TYPE:46,ERR_SLOT_TYPE:47,ERR_SEND_NOT_OPEN:48,ERR_SERVER_CLOSE:49,ERR_CHAT_LATER:50,ERR_STATE_REQ_REPEAT:51,ERR_GET_CLOTHE:52,ERR_PLAYER_DATA:55,ERR_ROOM_TOKEN:56,ERR_NOT_SLOT_STATE:57,ERR_SLOT_CAN_NOT_LEAVE:58,ERR_GREATER_MAX_SLOT:59,ERR_PLAYER_STAND:60,ERR_TARGET_PLAYER_NOT_EXIST:61,ERR_EXPRESSION_BUSY:62,ERR_SWITCH_CLOTHE_BUSY:63,ERR_SIT_DOWN:64,ERR_STAND_UP:65,ERR_ON_BANKER_LIST_FULL:66,ERR_GREATER_ON_BANKER_COUNT:66,ERR_NO_SLOT_BEFOR:67,ERR_CANCEL_BANKER_FAIL:68,ERR_SLOT_MUTUAL_POS:69,ERR_NEW_PLAY_SLOT_LIMIT:70,ERR_SIT_DOWN_COIN_NOT_ENOUGH:71,ERR_SLOT_CASH_LIMIT:75,ERR_MIN_CARRY_SLOT_LIMIT:76,disptErrorMsg:function(t){if(t.hasOwnProperty("cmd")&&null!=t.cmd)if(this[t.cmd])switch(parseInt(t.err_no)){case this.ERR_SEND_NOT_OPEN:cc.vv.gameRequest.stateReq();break;case this.ERR_SERVER_CLOSE:cc.vv.gameServer.closeSockt(),e("AlertSingle").show(TXT("txt_00007"),function(){cc.vv.resMgr.enterScene(SCENES_TYPE.LOBBY)});break;case this.ERR_TARGET_FISH_NOT_HIT_FISH:case this.ERR_BULLET_TARGET_FISH_NOT_EXIST:case this.ERR_HIT_FISH_NOT_EXIST:break;default:this[t.cmd](t)}else cc.log("game \u9519\u8bef\u6d88\u606f\u672a\u76d1\u542c",t.cmd);else this.speacilHandler(t);cc.error(t),t=null},slot_req:function(t){switch(parseInt(t.err_no)){case this.ERR_COIN_NOT_ENOUGH:signal.emit("dragon_slot_chip",parseInt(t.err_no));break;case this.ERR_NOT_SLOT_STATE:case this.ERR_SLOT_TYPE:break;case this.ERR_GREATER_MAX_SLOT:case this.ERR_NEW_PLAY_SLOT_LIMIT:signal.emit("dragon_slot_chip",parseInt(t.err_no));break;case this.ERR_SLOT_MUTUAL_POS:e("Tips").show(TXT("txt_11400"));break;case this.ERR_SLOT_CASH_LIMIT:e("myWalletPanel").show();break;case this.ERR_MIN_CARRY_SLOT_LIMIT:e("Tips").show(formatString("Carrying less than \u20b9{0}, please add cash.",parseInt(t.err_msg)/100)),e("myWalletPanel").show();break;default:e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null},slot_repeated_req:function(t){switch(parseInt(t.err_no)){case this.ERR_COIN_NOT_ENOUGH:e("Tips").show(TXT("txt_11401"));break;case this.ERR_NOT_SLOT_STATE:case this.ERR_SLOT_TYPE:break;case this.ERR_GREATER_MAX_SLOT:e("Tips").show(TXT("txt_11406"));break;case this.ERR_NO_SLOT_BEFOR:e("Tips").show(TXT("txt_11405"));break;case this.ERR_SLOT_MUTUAL_POS:e("Tips").show(TXT("txt_11400"));break;case this.ERR_NEW_PLAY_SLOT_LIMIT:e("Tips").show(TXT("txt18_20007")),e("myWalletPanel").show();break;case this.ERR_SLOT_CASH_LIMIT:e("myWalletPanel").show();break;case this.ERR_MIN_CARRY_SLOT_LIMIT:e("Tips").show(formatString("Carrying less than \u20b9{0}, please add cash.",parseInt(t.err_msg)/100)),e("myWalletPanel").show();break;default:e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null},heart_req:function(t){parseInt(t.err_no),e("Alert").show("default:"+t.err_msg+t.cmd),t=null},login_req:function(t){switch(parseInt(t.err_no)){case this.ERR_LOGIN_TOKEN:cc.vv.gameServer.closeSockt(),cc.vv.userMgr.loginSuc=!1,e("AlertSingle").show(TXT("txt_00002"),function(){cc.vv.resMgr.enterScene(SCENES_TYPE.LOGIN)});break;case this.ERR_ENTER_ROOM_DATA:case this.ERR_ENTER_SVR:case this.ERR_ENTER_GAME_TYPE:case this.ERR_ENTER_ROOM_TYPE:cc.vv.gameServer.loginFailCount+=1,cc.vv.gameServer.loginFailCount>=3&&(cc.vv.gameServer.closeSockt(),e("AlertSingle").show(TXT("txt_00003"),function(){cc.vv.resMgr.enterScene(SCENES_TYPE.LOBBY)}));break;default:cc.vv.gameServer.closeSockt(),e("AlertSingle").show(TXT("txt_00003"),function(){cc.vv.resMgr.enterScene(SCENES_TYPE.LOBBY)})}t=null},enter_req:function(t){switch(parseInt(t.err_no)){case this.ERR_COIN_LESS_ROOM:case this.ERR_COIN_GREATER_ROOM:case this.ERR_ENTER_TABLE:cc.vv.gameServer.closeSockt();var i=TXT("txt_00004");t.err_no==this.ERR_COIN_GREATER_ROOM?i=TXT("txt_00005"):t.err_no==this.ERR_ENTER_TABLE&&(i=TXT("txt_00006")),e("Alert").show(i,function(){cc.vv.resMgr.enterScene("lobbyScene")}.bind(this));break;default:cc.vv.gameServer.closeSockt(),e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null},state_req:function(t){switch(parseInt(t.err_no)){case this.ERR_STATE_REQ_REPEAT:break;default:e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}},leave_req:function(t){switch(cc.vv.gameControl.isselfLevel=!1,cc.vv.gameControl.gotoGameid=null,parseInt(t.err_no)){case this.ERR_NOT_IN_TABLE:cc.vv.gameControl.exitGame();break;case this.ERR_SLOT_CAN_NOT_LEAVE:e("Tips").show(TXT("txt_11404"));break;default:e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null},seat_player_req:function(t){switch(parseInt(t.err_no)){case this.ERR_PLAYER_NOT_EXIST:e("Tips").show(TXT("txt_00025"));break;default:e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null},last_win_player_req:function(t){parseInt(t.err_no),e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no),t=null},stand_up_req:function(t){switch(parseInt(t.err_no)){case this.ERR_PLAYER_STAND:case this.ERR_STAND_UP:break;default:e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null},sit_down_req:function(t){switch(parseInt(t.err_no)){case this.ERR_SIT_DOWN:e("Tips").show(TXT("txt_11502"));break;case this.ERR_SIT_DOWN_COIN_NOT_ENOUGH:e("Tips").show(TXT("txt_11500","\u20b9"+cc.vv.utils.getCoinValueclub(Number(t.err_msg))));break;default:e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null},on_banker_req:function(t){switch(parseInt(t.err_no)){case this.ERR_ON_BANKER_LIST_FULL:e("Tips").show(TXT("txt_11410"));break;case this.ERR_GREATER_ON_BANKER_COUNT:e("Tips").show(TXT("txt_11411"));break;case this.ERR_COIN_NOT_ENOUGH:e("Tips").show(TXT("txt_11401"));break;default:e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null},cancel_banker_req:function(t){parseInt(t.err_no),e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no),t=null},off_banker_req:function(t){parseInt(t.err_no),e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no),t=null},fill_banker_req:function(t){switch(parseInt(t.err_no)){case this.ERR_COIN_NOT_ENOUGH:e("Tips").show(TXT("txt_11401")),e("GameShop").show(2);break;default:e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null},on_banker_list_req:function(t){parseInt(t.err_no),e("Alert").show("default:"+t.err_msg+"  "+t.cmd+t.err_no),t=null},chat_req:function(t){switch(parseInt(t.err_no)){case this.ERR_CHAT_LATER:e("Tips").show(TXT("txt_11504"))}t=null},interactive_expression_req:function(t){switch(parseInt(t.err_no)){case this.ERR_COIN_NOT_ENOUGH:e("Tips").show(TXT("txt_11401"));break;case this.ERR_TARGET_PLAYER_NOT_EXIST:break;case this.ERR_EXPRESSION_BUSY:e("Tips").show(TXT("txt_00289"))}t=null},speacilHandler:function(t){switch(parseInt(t.err_no)){case this.ERR_PVP_FREE_TOO_LONG:cc.vv.gameControl.exitGame(),cc.vv.resMgr.showKick=!0;break;case this.ERR_NEW_CLIENT_LOGIN:cc.vv.gameServer.closeSockt(),e("AlertSingle").show(TXT("txt_00011"),function(){cc.vv.gameControl.exitGame()});break;default:e("AlertSingle").show("default:"+t.err_msg+"  "+t.cmd+t.err_no)}t=null}},cc._RF.pop()},{Alert:void 0,AlertSingle:void 0,GameShop:void 0,Tips:void 0,myWalletPanel:void 0}],dragonGameControl:[function(e,t){"use strict";cc._RF.push(t,"11661v7Lq9JL6+KVkHTaCkg","dragonGameControl"),t.exports={matchId:"",gameStatus:DRAGON_STATUS.WAITING,isConnected:!1,remainTime:0,totalTime:1,betConfig:[1,5,10,50],picConfig:[1,5,10,20,50,100,500,1e3,2e3,5e3,1e4],coinConfig:[1,5,10,20,50,100,500,1e3,2e3,5e3,1e4],curBet:0,total_slot:[0,0,0],self_slot:[0,0,0],seatInfos:[],mySeatInfo:{},dragon_open_cards:{cards:[],point:0,type:0},tiger_open_cards:{cards:[],point:0,type:0},gameWiner:3,bankerList:[],myChipPot:0,syncTime:-1,matchRecord:[],zdxShowArr:[0,0,0],local_chat_list:[],ad_game_count:!0,play_game_cnt:0,selfIsInDesk:!1,slot_money_limit:0,addMyChipPot:function(e){(e=parseInt(e))&&isFinite(e)&&(this.syncTime=120,this.myChipPot+=e,signal.emit("update_chip"))},subMyChipPot:function(e){(e=parseInt(e))&&isFinite(e)&&(this.myChipPot-=e,this.myChipPot<=0&&(this.syncTime=-1,this.myChipPot=0),signal.emit("update_chip"))},loginGameSuc:function(){cc.vv.gameServer.reconnectNum=0,cc.vv.gameServer.loginFailCount=0,this.reset(),cc.vv.gameRequest.stateReq()},getCurBetCost:function(){return this.betConfig[this.curBet]},getTotalSlotByType:function(e){return this.total_slot[e-1]?this.total_slot[e-1]:0},getSelfSlotByType:function(e){return this.self_slot[e-1]?this.self_slot[e-1]:0},doSeatPlayerInfo:function(e){if(e){e.coin=e.coin?e.coin:0,e.jewel=e.jewel?e.jewel:0,e.guild=e.guild?e.guild:0,e.pearl=e.pearl?e.pearl:0;for(var t=0;t<e.item_list.length;t++){var i=e.item_list[t];e.items||(e.items=[]),e.items[i.id]=Number(i.count),i.id==cc.vv.global.depositItemID?e.coin=cc.vv.utils.getCoinValueclub(Number(i.count)):i.id==cc.vv.global.withrawableItemID?e.jewel=cc.vv.utils.getCoinValueclub(Number(i.count)):i.id==cc.vv.global.lotteryItemID?e.lottery_ticket=cc.vv.utils.getCoinValueclub(Number(i.count)):i.id==cc.vv.global.guildItemID?e.guild=cc.vv.utils.getCoinValueclub(Number(i.count)):i.id==cc.vv.global.pearlItemID&&(e.pearl=cc.vv.utils.getCoinValueclub(Number(i.count)))}e.lottery_ticket=e.lottery_ticket+e.guild+e.pearl,e.coin=e.coin+e.lottery_ticket}e=null},updateGameCntNTF:function(e){this.play_game_cnt=e.play_game_cnt,this.updateCurrentBetConfig()},updateCurrentBetConfig:function(){var e=cc.vv.userMgr.total_coin;this.betConfig=e<=500?cc.vv.global.BAIREN_CHIP[0]:e<=2e3?cc.vv.global.BAIREN_CHIP[1]:e<=5e3?cc.vv.global.BAIREN_CHIP[2]:cc.vv.global.BAIREN_CHIP[3],signal.emit("update_operator_ui")},stateRes:function(e){cc.error("stateRes",e),this.isConnected=!0,this.reset(),this.matchId=e.match_id,this.gameStatus=e.state;for(var t=0;t<e.total_slot_list.length;t++)e.total_slot_list[t]=cc.vv.utils.getCoinValueclub(Number(e.total_slot_list[t]));for(var i=0;i<e.self_slot_list.length;i++)e.self_slot_list[i]=cc.vv.utils.getCoinValueclub(Number(e.self_slot_list[i]));this.gameStatus==DRAGON_STATUS.WAITING?(this.total_slot=[0,0,0],this.self_slot=[0,0,0],this.zdxShowArr=[0,0,0]):(this.total_slot=e.total_slot_list,this.self_slot=e.self_slot_list);for(var n=0;n<e.player_list.length;n++){var a=e.player_list[n];this.doSeatPlayerInfo(a),this.seatInfos[a.seat_id-1].user=a}this.doSeatPlayerInfo(e.self_info),this.mySeatInfo.user=e.self_info,this.play_game_cnt=e.play_game_cnt,e.bet_coin_list.forEach(function(t,i){e.bet_coin_list[i]=cc.vv.utils.getCoinValueclub(t)}),this.coinConfig=e.bet_coin_list;var o=DataManager.getItem("pre_bet_coin_list"+cc.vv.gameServer.curGameType);if(o&&""!=o&&JSON.stringify(this.coinConfig)==o||DataManager.setItem("chip_select_nums"+cc.vv.gameServer.curGameType,JSON.stringify(cc.vv.gameControl.coinConfig.slice(0,4))),DataManager.setItem("pre_bet_coin_list"+cc.vv.gameServer.curGameType,JSON.stringify(this.coinConfig)),this.updateCurrentBetConfig(),signal.emit("init_game",e),cc.vv.userMgr.charge>0)for(var c=this.betConfig.length-1;c>=0&&!(cc.vv.userMgr.total_coin>=this.betConfig[c]);c--);else for(var s=this.betConfig.length-1;s>=0&&!(cc.vv.userMgr.total_coin/2>=this.betConfig[s]);s--);cc.vv.gameRequest.refreshReq&&cc.vv.gameRequest.refreshReq(REFRESH_TYPE.REFRESH_ALL),this.selfIsInDesk=Number(this.mySeatInfo.user.seat_id)<=6,this.slot_money_limit=cc.vv.utils.getCoinValueclub(e.slot_money_limit),cc.error("slot_money_limit",this.slot_money_limit),signal.emit("update_chip_mask",!0)},setGamePoker:function(e){this.dragon_open_cards=e.dragon_open_cards,this.tiger_open_cards=e.tiger_open_cards,this.gameWiner=e.winer},stateNTF:function(e){if(this.gameStatus=e.state,this.gameStatus==DRAGON_STATUS.WAITING&&cc.vv.gameControl.invite_tables&&null!=cc.vv.gameControl.invite_tables&&cc.vv.gameRequest.leaveGameReq(),this.remainTime=e.remain_time,this.totalTime=e.continue_time,this.matchId=e.match_id,this.playerCount=e.rich_rank_player_count,this.isConnected)for(var t=0;t<cc.vv.gameControl.seatInfos.length;t++){var i=cc.vv.gameControl.seatInfos[t];i&&i.user&&cc.isValid(i.seat)?i.com.sitDown(i.user):i&&!i.user&&cc.isValid(i.seat)&&i.com.standUp()}switch(e.state){case DRAGON_STATUS.STARTING:this.updateCurrentBetConfig();break;case DRAGON_STATUS.BETING:this.ad_game_count=!0;break;case DRAGON_STATUS.SEND_CARD:this.setGamePoker(e);break;case DRAGON_STATUS.ENDING:this.setGamePoker(e),this.matchRecord.push({dragon:e.dragon_open_cards,tiger:e.tiger_open_cards,winer:e.winer,match_id:e.match_id,time:(new Date).getTime()});for(var n=0,a=0;a<cc.vv.gameControl.self_slot.length;a++)n+=cc.vv.gameControl.self_slot[a];if(n>0)for(var o=0;o<e.pos_win_list.length;o++)for(var c=e.pos_win_list[o],s=0;s<c.seat_win_list.length;s++)c.seat_win_list[s].player_id,cc.vv.userMgr.player_id;signal.emit("update_chip_mask",!0);break;case DRAGON_STATUS.WAITING:for(var r=0,l=0;l<cc.vv.gameControl.self_slot.length;l++)r+=cc.vv.gameControl.self_slot[l];r>0&&(cc.vv.global.isClubBaiRenPochan(GAMETYPEENUM.DRAGONCLUB)&&cc.vv.global.showZhuFuFristLayer(GAMETYPEENUM.DRAGONCLUB),cc.vv.userMgr.showWithDrawTips()),this.total_slot=[0,0,0],this.self_slot=[0,0,0],this.zdxShowArr=[0,0,0],this.isConnected}signal.emit("state_ntf",e)},mySlotRes:function(e){e.coin=cc.vv.utils.getCoinValueclub(Number(e.coin)),this.self_slot[e.pos-1]+=e.coin,this.total_slot[e.pos-1]+=e.coin;var t=this.coinConfig.indexOf(e.coin)+1;t=-1==t?1:t,signal.emit("some_one_slot_ntf",{player_id:cc.vv.userMgr.player_id,seat_id:this.mySeatInfo.user?this.mySeatInfo.user.seat_id:1,slot_list:[{pos:e.pos,coin:e.coin,chip_type:this.getChipType(e.coin)}]}),this.idZdx(cc.vv.userMgr.player_id)&&(this.zdxShowArr[e.pos-1]=1,signal.emit("zdx_show",e.pos)),DataManager.setItem("firstBet","1"),this.ad_game_count&&(this.ad_game_count=!1),signal.emit("update_chip_mask",!1)},someOnelotNTF:function(e){if(parseInt(e.player_id)!=parseInt(cc.vv.userMgr.player_id)){e.coin=cc.vv.utils.getCoinValueclub(Number(e.coin)),this.total_slot[e.pos-1]+=e.coin;var t=this.coinConfig.indexOf(e.coin)+1;t=-1==t?1:t,e.slot_list=[{pos:e.pos,coin:e.coin,chip_type:this.getChipType(e.coin)}],signal.emit("some_one_slot_ntf",e),this.idZdx(e.player_id)&&(this.zdxShowArr[e.pos-1]=1,signal.emit("zdx_show",e.pos))}},myRepeatedSlotRes:function(e){for(var t=[],i=0;i<e.pos_slot_list.length;i++){var n=e.pos_slot_list[i];n.coin=cc.vv.utils.getCoinValueclub(Number(n.coin)),0!=n.coin&&(this.self_slot[n.pos-1]+=n.coin,this.total_slot[n.pos-1]+=n.coin,this.splitTotalSlotChip(n.coin,n.pos,t),this.idZdx(cc.vv.userMgr.player_id)&&(this.zdxShowArr[n.pos-1]=1,signal.emit("zdx_show",n.pos)))}signal.emit("some_one_slot_ntf",{player_id:cc.vv.userMgr.player_id,seat_id:this.mySeatInfo.user.seat_id,slot_list:t}),this.ad_game_count&&(this.ad_game_count=!1)},repeatedSlotNTF:function(e){if(parseInt(e.player_id)!=parseInt(cc.vv.userMgr.player_id)){for(var t=[],i=0;i<e.pos_slot_list.length;i++){var n=e.pos_slot_list[i];n.coin=cc.vv.utils.getCoinValueclub(Number(n.coin)),this.splitTotalSlotChip(n.coin,n.pos,t),this.idZdx(e.player_id)&&(this.zdxShowArr[n.pos-1]=1,signal.emit("zdx_show",n.pos))}signal.emit("some_one_slot_ntf",{player_id:e.player_id,seat_id:e.seat_id,slot_list:t})}},splitTotalSlotChip:function(e,t,i){e=Number(e);for(var n=4,a=this.coinConfig.length-1;a>=0;a--){var o=Math.floor(e/this.coinConfig[a]);if(o>0){e-=this.coinConfig[a]*o;for(var c=0;c<o;c++)n>0&&(i.push({pos:t,coin:this.coinConfig[a],chip_type:this.getChipType(this.coinConfig[a])}),n--)}if(e<=0)break}i.sort(function(e,t){return e.coin-t.coin})},getChipType:function(e){for(var t=0;t<this.picConfig.length;t++)if(this.picConfig[t]==e)return t;return 1},totalSlotNTF:function(e){for(var t=0;t<e.total_slot_list.length;t++)e.total_slot_list[t]=cc.vv.utils.getCoinValueclub(Number(e.total_slot_list[t]));var i=[],n=e.total_slot_list[DRAGON_BETTYPE.EQUAL-1]-this.total_slot[DRAGON_BETTYPE.EQUAL-1];if(n>0){if(i[DRAGON_BETTYPE.EQUAL-1]=[],n>10)for(var a=cc.vv.utils.random(1,3),o=0;o<a;o++){if(o==a-1){n>10&&i[DRAGON_BETTYPE.EQUAL-1].push(n);break}var c=Math.floor(n*Math.random());c>10&&(n-=c,i[DRAGON_BETTYPE.EQUAL-1].push(c))}0==i[DRAGON_BETTYPE.EQUAL-1].length&&i[DRAGON_BETTYPE.EQUAL-1].push(n)}var s=e.total_slot_list[DRAGON_BETTYPE.IDLER-1]-this.total_slot[DRAGON_BETTYPE.IDLER-1];if(s>0){if(i[DRAGON_BETTYPE.IDLER-1]=[],s>10)for(var r=cc.vv.utils.random(1,3),l=0;l<r;l++){if(l==r-1){s>10&&i[DRAGON_BETTYPE.IDLER-1].push(s);break}var d=Math.floor(s*Math.random());d>10&&(s-=d,i[DRAGON_BETTYPE.IDLER-1].push(d))}0==i[DRAGON_BETTYPE.IDLER-1].length&&i[DRAGON_BETTYPE.IDLER-1].push(s)}var h=e.total_slot_list[DRAGON_BETTYPE.BANKER-1]-this.total_slot[DRAGON_BETTYPE.BANKER-1];if(h>0){if(i[DRAGON_BETTYPE.BANKER-1]=[],h>10)for(var u=cc.vv.utils.random(1,3),p=0;p<u;p++){if(p==u-1){h>10&&i[DRAGON_BETTYPE.BANKER-1].push(h);break}var _=Math.floor(h*Math.random());_>10&&(h-=_,i[DRAGON_BETTYPE.BANKER-1].push(_))}0==i[DRAGON_BETTYPE.BANKER-1].length&&i[DRAGON_BETTYPE.BANKER-1].push(h)}signal.emit("outsome_one_slot_ntf",{player_id:-1,seat_id:-1,slot_list:[]},i),this.total_slot=e.total_slot_list},standUpNtf:function(e){for(var t=0;t<this.seatInfos.length;t++){var i=this.seatInfos[t];i&&i.user&&parseInt(i.user.player_id)==parseInt(e.player_id)&&(i.user=null,i.com.standUp())}parseInt(cc.vv.userMgr.player_id)==parseInt(e.player_id)&&(this.mySeatInfo.user.seat_id=9999,this.selfIsInDesk=Number(this.mySeatInfo.user.seat_id)<=6)},sitDownNtf:function(e){for(var t=0;t<this.seatInfos.length;t++){var i=this.seatInfos[t];i&&i.user&&parseInt(i.user.player_id)==parseInt(e.player_id)&&(i.user=null,i.com.standUp())}var n=this.seatInfos[e.target_id-1];n&&(this.doSeatPlayerInfo(e.seat_player),n.user=e.seat_player,n.com.sitDown(e.seat_player)),parseInt(cc.vv.userMgr.player_id)==parseInt(e.player_id)&&(this.mySeatInfo.user.seat_id=e.target_id,this.selfIsInDesk=Number(this.mySeatInfo.user.seat_id)<=6)},onBankerNtf:function(e){this.bankerList=e.list,signal.emit("banker_list_ntf")},offBankerNtf:function(){},fillBankerNtf:function(){},fillBankerHintNtf:function(t){parseInt(t.player_id)==parseInt(cc.vv.userMgr.player_id)?(t.remain_time=this.remainTime,t.fill_min_coin=cc.vv.utils.getCoinValueclub(Number(t.fill_min_coin)),t.fill_max_coin=cc.vv.utils.getCoinValueclub(Number(t.fill_max_coin)),Number(t.fill_min_coin)>cc.vv.userMgr.total_coin?e("dragonBankerTip").show(t,1):e("dragonBankerSup").show(t)):0!=parseInt(t.player_id)&&signal.emit("other_fill_banker")},offBankerHintNtf:function(t){2==t.reason&&(null!=t.player_id&&parseInt(t.player_id)!=parseInt(cc.vv.userMgr.player_id)||(t.remain_time=this.remainTime,t.coin=cc.vv.utils.getCoinValueclub(Number(t.coin)),e("dragonBankerTip").show(t,2)))},seatPlayerRes:function(e){2==e.type?signal.emit("update_player_res",e):1==e.type&&signal.emit("update_player_info",e)},lastWinPlayer:function(e){signal.emit("last_win_player",e)},chatNTF:function(e){for(e.c_time=(new Date).getTime()/1e3,this.selfIsInDesk||e.player_id!=cc.vv.userMgr.player_id?signal.emit("chat_ntf",e):signal.emit("chat_ntf_self",e),this.local_chat_list.push(e);this.local_chat_list.length>100;)this.local_chat_list.shift()},expressionNTF:function(e){signal.emit("show_mofa",e)},slotFreetimeNtf:function(e){signal.emit("slot_free_time_ntf",e)},someEnterRoom:function(e){var t=this.seatInfos[e.seat_id-1];t&&(this.doSeatPlayerInfo(e),t.user=e,t.com.sitDown(e))},someLeaveRoom:function(e){for(var t=0;t<this.seatInfos.length;t++){var i=this.seatInfos[t];i&&i.user&&parseInt(i.user.player_id)==parseInt(e.player_id)&&(i.user=null,i.com.standUp())}parseInt(e.player_id)==parseInt(cc.vv.userMgr.player_id)&&this.exitGame(e)},infoChangeNTF:function(e){for(var t=0;t<this.seatInfos.length;t++){var i=this.seatInfos[t];if(i&&i.player_id==e.player_id)for(var n in e)i[n]=e[n]}},matchRecordNTF:function(e){this.matchRecord=e.match_list,signal.emit("match_record_ntf",e)},itemChangeNTF:function(e){for(var t=0;t<this.seatInfos.length;t++)if(this.seatInfos[t]&&this.seatInfos[t].user){var i=this.seatInfos[t].user;if(i&&parseInt(i.player_id)==parseInt(e.player_id)){for(var n=0;n<e.list.length;n++)(c=e.list[n]).id==cc.vv.global.depositItemID?i.coin=cc.vv.utils.getCoinValueclub(Number(c.count)):c.id==cc.vv.global.withrawableItemID?i.jewel=Number(c.count):c.id==cc.vv.global.lotteryItemID?i.lottery_ticket=cc.vv.utils.getCoinValueclub(Number(c.count)):c.id==cc.vv.global.guildItemID?i.guild=cc.vv.utils.getCoinValueclub(Number(c.count)):c.id==cc.vv.global.pearlItemID&&(i.pearl=cc.vv.utils.getCoinValueclub(Number(c.count))),i.guild=i.guild?i.guild:0,i.pearl=i.pearl?i.pearl:0,i.lottery_ticket=i.lottery_ticket+i.guild+i.pearl,i.coin=i.coin+i.lottery_ticket,i.items||(i.items=[]),i.items[c.id]=c.count;cc.vv.userMgr.updateInfoFromData(i),this.gameStatus==DRAGON_STATUS.SEND_CARD&&this.remainTime<1||signal.emit("update_seat_userinfo",i)}i=null}if(parseInt(cc.vv.userMgr.player_id)==parseInt(e.player_id)){for(var a=this.mySeatInfo.user,o=0;o<e.list.length;o++){var c;(c=e.list[o]).id==cc.vv.global.depositItemID?a.coin=cc.vv.utils.getCoinValueclub(Number(c.count)):c.id==cc.vv.global.withrawableItemID?a.jewel=cc.vv.utils.getCoinValueclub(Number(c.count)):c.id==cc.vv.global.lotteryItemID?a.lottery_ticket=cc.vv.utils.getCoinValueclub(Number(c.count)):c.id==cc.vv.global.guildItemID?a.guild=cc.vv.utils.getCoinValueclub(Number(c.count)):c.id==cc.vv.global.pearlItemID&&(a.pearl=cc.vv.utils.getCoinValueclub(Number(c.count))),a.guild=a.guild?a.guild:0,a.pearl=a.pearl?a.pearl:0,a.lottery_ticket=a.lottery_ticket+a.guild,a.coin=a.coin+a.lottery_ticket,a.items||(a.items=[]),a.items[c.id]=c.count}cc.vv.userMgr.updateInfoFromData(a),this.gameStatus==DRAGON_STATUS.SEND_CARD&&this.remainTime<1||signal.emit("update_seat_userinfo",a)}},idZdx:function(e){return!(!this.seatInfos[0]||!this.seatInfos[0].user||this.seatInfos[0].user.player_id!=e)},handleErro:function(){cc.log("\u903b\u8f91\u51fa\u73b0\u95ee\u9898\uff0c\u627e\u540e\u7aef\u8054\u8c03"),this.exitGame()},exitGame:function(e){cc.log("\u9000\u51fa\u6e38\u620f",e);var t=cc.director.getScene().name;cc.vv.gameServer.closeSockt(),t!=SCENES_TYPE.LOBBY&&(cc.director.loadScene("indexScene"),this.reset())},reset:function(){this.slot_money_limit=0,this.gameStatus=DRAGON_STATUS.WAITING,this.matchId="",this.gameStatus=0,this.myChipPot=0,this.syncTime=-1,this.mySeatInfo.user=null;for(var e=0;e<this.seatInfos.length;e++)this.seatInfos[e]&&(this.seatInfos[e].user=null);this.total_slot=[0,0,0],this.self_slot=[0,0,0],this.zdxShowArr=[0,0,0]}},cc._RF.pop()},{dragonBankerSup:"dragonBankerSup",dragonBankerTip:"dragonBankerTip"}],dragonGameDesk:[function(e,t){"use strict";cc._RF.push(t,"3a72dMNCj9Lc5KZO2abMVbv","dragonGameDesk"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;signal.on("touch_menu",function(){e.isCanMove&&(e.boxType==LEFTBOX_TYPE.CLOSE?e.openLeftBox():e.closeLeftBox())},this),signal.on("touch_menu_close",function(){e.isCanMove&&e.closeLeftBox()},this),signal.on("touch_menu_open",function(){e.isCanMove&&e.openLeftBox()},this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel.bind(this)),this._touchId=null,this.minPosX=0,this.maxPosX=300,this.isCanMove=!0,this.speed=1200,this.ignoreSpx=30,this.boxType=LEFTBOX_TYPE.CLOSE,this.gameBG=this.node.parent.getChildByName("bg")},updateBGPos:function(){this.gameBG&&(this.gameBG.x=this.node.x,this.gameBG.y=this.node.y)},openLeftBox:function(e){var t=this;e||(e=this.speed),this.boxType=LEFTBOX_TYPE.OPEN,this._touchId=null,this.isCanMove=!1,this.node.stopAllActions();var i=Math.abs(this.maxPosX-this.node.x);if(i<=this.ignoreSpx)return this.isCanMove=!0,void(this.node.x=this.maxPosX);var n=Math.abs(i)/e;this.node.runAction(cc.sequence(cc.moveTo(n,this.maxPosX,this.node.y).easing(cc.easeCubicActionOut()),cc.callFunc(function(){t.node.x=t.maxPosX,t.isCanMove=!0}))),signal.emit("menu_open")},closeLeftBox:function(e){var t=this;e||(e=this.speed),this.boxType=LEFTBOX_TYPE.CLOSE,this._touchId=null,this.isCanMove=!1,this.node.stopAllActions();var i=Math.abs(this.node.x-this.minPosX);if(i<=this.ignoreSpx)return this.isCanMove=!0,void(this.node.x=this.minPosX);var n=Math.abs(i)/e;this.node.runAction(cc.sequence(cc.moveTo(n,this.minPosX,this.node.y).easing(cc.easeCubicActionOut()),cc.callFunc(function(){t.node.x=t.minPosX,t.isCanMove=!0})))},onTouchBegin:function(e){if(this.isCanMove)if(this.boxType!=LEFTBOX_TYPE.OPEN){if(null===this._touchId){this._touchId=e.getID(),this._isMove=!1;var t=e.getTouches()[0].getLocation();return this._prePos=t,this.posxxx=this.node.x,!0}}else this.closeLeftBox()},onTouchMove:function(e){var t=this;if(e.getID()===this._touchId){var i=e.getTouches()[0].getLocation();this._touchMoved=i;var n=this._touchMoved.sub(this._prePos);n.x<=0?DIRECTIONTYPE.LEFT:DIRECTIONTYPE.RIGHT,this._prePos=this._touchMoved;var a=this.posxxx+.5*n.x;this.posxxx=a,a=Math.max(this.minPosX,a),a=Math.min(this.maxPosX,a),this.node.runAction(cc.sequence(cc.delayTime(.15),cc.callFunc(function(){t.node.x=a,t.updateBGPos()})))}},onTouchEnd:function(e){e.getID()===this._touchId&&(this._touchId=null,e.stopPropagation(),this.node.x>1*(this.minPosX+this.maxPosX)/3?this.openLeftBox(.4*this.speed):this.closeLeftBox())},onTouchCancel:function(e){this.onTouchEnd(e)},offTouchEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},onDestroy:function(){this.offTouchEvent(),signal&&signal.targetOff(this)},start:function(){},update:function(){this.updateBGPos()}}),cc._RF.pop()},{}],dragonGameDisptMsg:[function(e,t){"use strict";var i;cc._RF.push(t,"d475fJA3+FARa2gtrAuzxEm","dragonGameDisptMsg");var n=e("dragonErrorHandler");t.exports=((i={ignoreCMDS:["item_ntf","pos_slot_ntf","heart_res","slot_ntf"],disptMsg:function(t){for(var i in t)if(t&&t.hasOwnProperty(i))if(this[i]){var n=t[i];null==cc.vv.gameControl&&(cc.vv.gameControl=e("dragonGameControl")),n&&(-1==this.ignoreCMDS.indexOf(i)&&cc.log("baccarat \u6d88\u606f\u5df2\u5206\u53d1",i,n),this[i](n))}else t[i]&&(cc.log("game \u6d88\u606f\u672a\u76d1\u542c",i),t[i]=null);t=null},error_res:function(e){n.disptErrorMsg(e)},login_res:function(){cc.vv.gameControl.loginGameSuc()},enter_res:function(e){cc.vv.gameControl.tableId=e.table_id,e=null},heart_res:function(){},state_res:function(e){cc.vv.gameRequest.sendHert(),cc.vv.gameControl.stateRes(e)},state_ntf:function(e){cc.vv.gameControl.stateNTF(e)},slot_res:function(e){cc.vv.gameControl.mySlotRes(e)},slot_ntf:function(e){cc.vv.gameControl.someOnelotNTF(e)},pos_slot_ntf:function(e){cc.vv.gameControl.totalSlotNTF(e)},seat_player_ntf:function(e){cc.vv.gameControl.someEnterRoom(e)},slot_repeated_res:function(e){cc.vv.gameControl.myRepeatedSlotRes(e)},slot_repeated_ntf:function(e){cc.vv.gameControl.repeatedSlotNTF(e)},match_record_ntf:function(e){cc.vv.gameControl.matchRecordNTF(e)},stand_up_res:function(){},stand_up_ntf:function(e){cc.vv.gameControl.standUpNtf(e)},sit_down_res:function(){},sit_down_ntf:function(e){cc.vv.gameControl.sitDownNtf(e)},on_banker_res:function(){e("Tips").show(TXT("txt_11413"))},on_banker_ntf:function(e){cc.vv.gameControl.onBankerNtf(e)},on_banker_list_res:function(e){cc.vv.gameControl.onBankerNtf(e)},cancel_banker_res:function(e){cc.vv.gameControl.onBankerNtf(e)},off_banker_res:function(){e("Tips").show(TXT("txt_11414"))},off_banker_ntf:function(e){cc.vv.gameControl.offBankerNtf(e)},fill_banker_res:function(){e("Tips").show(TXT("txt_11415"))},fill_banker_ntf:function(e){cc.vv.gameControl.fillBankerNtf(e)},fill_banker_hint_ntf:function(e){cc.vv.gameControl.fillBankerHintNtf(e)},seat_player_res:function(e){cc.vv.gameControl.seatPlayerRes(e)},last_win_player_res:function(e){cc.vv.gameControl.lastWinPlayer(e)},slot_free_time_ntf:function(e){cc.vv.gameControl.slotFreetimeNtf(e)}}).fill_banker_hint_ntf=function(e){cc.vv.gameControl.fillBankerHintNtf(e)},i.off_banker_hint_ntf=function(e){cc.vv.gameControl.offBankerHintNtf(e)},i.item_ntf=function(e){cc.vv.gameControl.itemChangeNTF(e)},i.chat_res=function(){},i.chat_ntf=function(e){cc.vv.gameControl.chatNTF(e)},i.interactive_expression_res=function(){},i.interactive_expression_ntf=function(e){cc.vv.gameControl.expressionNTF(e),e=null},i.leave_res=function(){cc.vv.gameControl.exitGame()},i.leave_ntf=function(e){cc.vv.gameControl.someLeaveRoom(e)},i.update_game_cnt_ntf=function(e){cc.vv.gameControl.updateGameCntNTF(e)},i),cc._RF.pop()},{Tips:void 0,dragonErrorHandler:"dragonErrorHandler",dragonGameControl:"dragonGameControl"}],dragonGameRequest:[function(e,t){"use strict";cc._RF.push(t,"d5d33aSdURL15zasPS2EPGl","dragonGameRequest"),t.exports={sendHert:function(){var e={heart_req:{tick:1}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_HALL,e),e=null},enterGameReq:function(e,t){var i={enter_req:{room_type:e,room_token:t}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_HALL,i),i=null},leaveGameReq:function(e){var t={leave_req:{table_id:e}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_HALL,t),t=null},loginReq:function(e,t,i){var n={login_req:{player_id:cc.vv.userMgr.player_id,game_type:e,room_type:t,login_token:cc.vv.userMgr.token_id,room_token:i}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_LOGIN,n),n=null},stateReq:function(){var e={state_req:{player_id:cc.vv.userMgr.player_id}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,e),e=null},slotReq:function(t,i){cc.log("slotReq",t,i);var n=cc.vv.userMgr.total_coin;if(cc.log("total_coin",n),n<i)e("Tips").show("\u91d1\u5e01\u4e0d\u8db3");else{cc.vv.userMgr.subCoin(i);var a={match_id:"202502110029",pos:t,coin:100*i};cc.vv.gameControl.mySlotRes(a)}},slotRepeatedReq:function(){if(!cc.vv.global.checkBaiRenBetLimit()&&0!=cc.vv.userMgr.charge){var e={slot_repeated_req:{}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,e),e=null}},seatPlayerReq:function(e,t){var i={seat_player_req:{type:e,player_id:t}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,i),i=null},lastWinPlayerReq:function(){var e={last_win_player_req:{}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,e),e=null},standUpReq:function(){var e={stand_up_req:{}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,e),e=null},sitDownReq:function(e){var t={sit_down_req:{target_id:parseInt(e)}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,t),t=null},applyUpBankerReq:function(e){var t={on_banker_req:{coin:100*e}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,t),t=null},cancelBnakerReq:function(e){var t={cancel_banker_req:{id:parseInt(e)}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,t),t=null},applyDownBankerReq:function(){var e={off_banker_req:{}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,e),e=null},applyFillBankerReq:function(e){var t={fill_banker_req:{coin:100*e}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,t),t=null},onBnakerListReq:function(){var e={on_banker_list_req:{}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,e),e=null},sendExpressionReq:function(e,t,i,n){var a={interactive_expression_req:{type:e,id:t,target_player:i,target_seat:n}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,a),a=null},sendChatReq:function(e,t,i,n){var a={chat_req:{chat_type:e,id:t,nickname:i,chat_str:n}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,a),a=null},sendVoiceReq:function(e,t,i){var n={chat_req:{chat_type:e,voice_time:t,voice_content:i}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,n),n=null},sendChatcustomReq:function(t,i){if(cc.vv.utils.chatStrImpose(i)){var n={chat_req:{chat_type:t,chat_str:i,nickname:cc.vv.userMgr.nickname}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,n),n=null}else e("Tips").show(TXT("txt_00314"))},itemReq:function(){},refreshReq:function(e){var t={refresh_req:{player_id:cc.vv.userMgr.player_id,type:e||REFRESH_TYPE.REFRESH_ALL}};cc.vv.pbManager.sendMessage(MSGTYPE.CLUB_DRAGON_PVP,t),t=null}},cc._RF.pop()},{Tips:void 0}],dragonMenu:[function(e,t){"use strict";cc._RF.push(t,"19eb7vLNZBBFapFe/h8rhkB","dragonMenu"),cc.Class({extends:cc.Component,properties:{menuclicknode:cc.Node,makeNode:cc.Node},onLoad:function(){this.menuclicknode.active=!1,this.makeNode.active=!1},show:function(){this.makeNode.x=-518,this.node.active=!0,this.menuclicknode.active=!0,this.makeNode.active=!0,this.makeNode.stopAllActions(),this.makeNode.runAction(cc.moveTo(.2,0,0))},hide:function(){this.makeNode.stopAllActions(),this.makeNode.runAction(cc.sequence(cc.moveTo(.2,-518,0),cc.callFunc(function(){0!=this.isValid&&(this.menuclicknode.active=!1,this.makeNode.active=!1)},this)))},onBtnClicked:function(t){if("menuclicknode"==t.target.name||"close_menu"==t.target.name)this.hide();else if("how_to_play"==t.target.name)e("dragonRule").show(),this.hide();else if("exit_to_lobby"==t.target.name){if(!cc.vv.gameServer.isConnect())return void cc.vv.gameControl.exitGame();this.hide();for(var i=0;i<cc.vv.gameControl.self_slot.length;i++)if(0!=cc.vv.gameControl.self_slot[i])return void cc.vv.gameControl.exitGame();for(var n=0;n<cc.vv.gameControl.self_slot.length;n++)if(0!=cc.vv.gameControl.self_slot[n])return;cc.vv.gameControl.exitGame()}},start:function(){},update:function(){}}),cc._RF.pop()},{dragonRule:"dragonRule"}],dragonOnline:[function(e,t){"use strict";cc._RF.push(t,"60aa7KEOERAeZ8AXpAORP+J","dragonOnline");var i=e("List");cc.Class({extends:e("baseView"),statics:{show:function(){var e=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);e?e.load("res/dragonOnline",cc.Prefab,function(e,t){if(!e&&t&&t instanceof cc.Prefab){var i=cc.instantiate(t);i.setPosition(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height/2),cc.director.getScene().addChild(i)}}):cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME)}},properties:{scrollview:cc.ScrollView,list:i,scrollview2:cc.ScrollView,list2:i,panels:{default:[],type:[cc.Node]}},onLoad:function(){var e=this;cc.vv.gameRequest.seatPlayerReq(2),this.curType=1,this.updateCurPanel(),signal.on("update_player_res",function(t){e.player_list=t.player_list,e.updateOnlinePlayer()},this),signal.on("last_win_player",function(t){t.player_list.sort(function(e){return e.player_id==cc.vv.userMgr.player_id?-1:1}),e.win_list=t.player_list,e.updatewinPlayer()},this)},updateOnlinePlayer:function(){if(null==this.player_list)return this.player_list=[],void cc.vv.gameRequest.seatPlayerReq(2);this.list.numItems=this.player_list.length,this.scrollview.scrollToTop(.1)},updatewinPlayer:function(){this.list2.numItems=this.win_list.length,this.scrollview2.scrollToTop(.1)},onBtnToggle:function(e,t){this.curType=parseInt(t),this.updateCurPanel()},updateCurPanel:function(){for(var e=0;e<this.panels.length;e++)this.panels[e].active=!1;1==this.curType?this.panels[0].active=!0:2==this.curType&&(this.panels[1].active=!0,null==this.win_list&&cc.vv.gameRequest.lastWinPlayerReq())},onListRender:function(e,t){e.active=!0,null==e.istion&&(e.istion=!0,t<=13&&(e.opacity=0,e.runAction(cc.sequence(cc.delayTime(.04*t),cc.fadeIn(.1)))));var i=this.player_list[t];i.guild=0,i.pearl=0;var n=e.getChildByName("mask").getChildByName("photo"),a=e.getChildByName("nameLabel"),o=e.getChildByName("goldLabel");if(a.getComponent(cc.Label).string=cc.vv.utils.subString2(i.nickname,10),cc.vv.utils.setPlayerIcon(i.player_id,i.face_url,n.getComponent(cc.Sprite)),e.getChildByName("vipLogo")&&e.getChildByName("vipLogo").getComponent("vipLogo").setNewVip(i.player_id,i.vip),i.item_list&&i.item_list.length>0){for(var c=0;c<i.item_list.length;c++){var s=i.item_list[c];s.id==cc.vv.global.depositItemID?i.coin=cc.vv.utils.getCoinValueclub(Number(s.count)):s.id==cc.vv.global.withrawableItemID?i.jewel=cc.vv.utils.getCoinValueclub(Number(s.count)):s.id==cc.vv.global.lotteryItemID?i.lottery_ticket=cc.vv.utils.getCoinValueclub(Number(s.count)):s.id==cc.vv.global.guildItemID?i.guild=cc.vv.utils.getCoinValueclub(Number(s.count)):s.id==cc.vv.global.pearlItemID&&(i.pearl=cc.vv.utils.getCoinValueclub(Number(s.count)))}i.lottery_ticket=i.lottery_ticket+i.guild+i.pearl,i.coin=i.coin+i.lottery_ticket,o.getComponent(cc.Label).string="\u20b9 "+cc.vv.utils.formatChipStr2(i.coin)}else o.getComponent(cc.Label).string="\u20b9 0"},onListwinRender:function(e,t){e.active=!0,null==e.istion&&(e.istion=!0,t<=13&&(e.opacity=0,e.runAction(cc.sequence(cc.delayTime(.04*t),cc.fadeIn(.1)))));var i=this.win_list[t],n=cc.vv.utils.getCoinValueclub(Number(i.coin)),a=e.getChildByName("mask").getChildByName("photo"),o=e.getChildByName("nameLabel"),c=e.getChildByName("goldLabel");o.getComponent(cc.Label).string=cc.vv.utils.subString2(i.nickname,8),cc.vv.utils.setPlayerIcon(i.player_id,i.face_url,a.getComponent(cc.Sprite)),e.getChildByName("vipLogo")&&e.getChildByName("vipLogo").getComponent("vipLogo").setNewVip(i.player_id,i.vip),c.getComponent(cc.Label).string=n>0?"\u20b9 "+cc.vv.utils.formatChipStr2(n):"\u20b9 0"},start:function(){},onDestroy:function(){signal.targetOff(this)}}),cc._RF.pop()},{List:void 0,baseView:void 0}],dragonOperatorPanel:[function(e,t){"use strict";cc._RF.push(t,"52fbbjAB9hJBZv6bgLBgP1+","dragonOperatorPanel");var i=e("dragonErrorHandler");cc.Class({extends:cc.Component,properties:{selectSP:cc.Node,chipItem:{default:[],type:cc.Node},chip_repeat:cc.Node,selfNode:cc.Node,myseat:cc.Node,chat_btn:cc.Node,people_btn:cc.Node,chipframe:{default:[],type:[cc.SpriteFrame]}},onLoad:function(){signal.on("update_operator_ui",this.updateChipUI,this),signal.on("dragon_slot_chip",this.slot_res_error,this)},slot_res_error:function(t){switch(t){case i.ERR_COIN_NOT_ENOUGH:if(cc.vv.gameControl.curBet<=0)cc.vv.global.showclubShop(cc.vv.gameServer.clubId);else if(cc.vv.gameControl.curBet=cc.vv.gameControl.curBet-1,this.selectSP.setPosition(this.chipItem[cc.vv.gameControl.curBet].getPosition()),cc.vv.gameControl.gameStatus==DRAGON_STATUS.BETING&&cc.vv.gameControl.betType){var n=cc.vv.gameControl.getCurBetCost();cc.vv.gameRequest.slotReq(cc.vv.gameControl.betType,n)}break;case i.ERR_GREATER_MAX_SLOT:if(cc.vv.gameControl.curBet<=0)this.scheduleOnce(function(){e("Tips").show("Bet more than the banker's gold\uff01")}.bind(this),1);else if(cc.vv.gameControl.curBet=cc.vv.gameControl.curBet-1,this.selectSP.setPosition(this.chipItem[cc.vv.gameControl.curBet].getPosition()),cc.vv.gameControl.gameStatus==DRAGON_STATUS.BETING&&cc.vv.gameControl.betType){var a=cc.vv.gameControl.getCurBetCost();cc.vv.gameRequest.slotReq(cc.vv.gameControl.betType,a)}break;case i.ERR_NEW_PLAY_SLOT_LIMIT:if(cc.vv.gameControl.curBet<=0)e("Tips").show(TXT("txt18_20007"));else if(cc.vv.gameControl.curBet=cc.vv.gameControl.curBet-1,this.selectSP.setPosition(this.chipItem[cc.vv.gameControl.curBet].getPosition()),cc.vv.gameControl.gameStatus==DRAGON_STATUS.BETING&&cc.vv.gameControl.betType){var o=cc.vv.gameControl.getCurBetCost();cc.vv.gameRequest.slotReq(cc.vv.gameControl.betType,o)}}},updateChipUI:function(){for(var e=cc.vv.gameControl.betConfig,t=0;t<e.length;t++)cc.vv.gameControl.gameStatus==DRAGON_STATUS.BETING?(cc.vv.userMgr.total_coin>=e[t]?(this.chipItem[t].getComponent(cc.Button).interactable=!0,cc.vv.utils.setColor(this.chipItem[t],255,255,255)):(this.chipItem[t].getComponent(cc.Button).interactable=!1,cc.vv.utils.setColor(this.chipItem[t],100,100,100)),cc.vv.userMgr.total_coin<1&&(this.chipItem[t].getComponent(cc.Button).interactable=!1,cc.vv.utils.setColor(this.chipItem[t],100,100,100))):this.chipItem[t].getComponent(cc.Button).interactable=!1,this.chipItem[t].getComponent(cc.Sprite).spriteFrame=this.chipframe[cc.vv.gameControl.getChipType(e[t])];cc.vv.gameControl.gameStatus==DRAGON_STATUS.BETING?cc.vv.utils.setColor(this.selectSP,255,255,255):cc.vv.utils.setColor(this.selectSP,100,100,100),cc.vv.utils.setColor(this.chip_repeat,255,255,255),this.chip_repeat.getComponent(cc.Button).interactable=!0,this.chipItem[cc.vv.gameControl.curBet]&&this.selectSP.setPosition(this.chipItem[cc.vv.gameControl.curBet].getPosition())},onBtnClicked:function(){},onBtnClickedBet:function(e,t){"chip_repeat"==e.target.name?cc.vv.gameControl.gameStatus==DRAGON_STATUS.BETING&&cc.vv.gameRequest.slotRepeatedReq():(this.selectSP.setPosition(e.target.getPosition()),cc.vv.gameControl.curBet=t)},start:function(){var e=cc.view.getVisibleSize().height-this.node.height;e>0&&(this.node.getChildByName("bg").y=-576-e/4,this.node.getChildByName("chipListPanel").y=-568-e/4-e/8,this.selfNode.y=-465.452-e/4-e/8,this.myseat.y=-463.822-e/4-e/8,this.chat_btn.y=-430-e/4,this.people_btn.y=-429.149-e/4)},onDestroy:function(){signal.targetOff(this)}}),cc._RF.pop()},{Tips:void 0,dragonErrorHandler:"dragonErrorHandler"}],dragonRecordPanel:[function(e,t){"use strict";cc._RF.push(t,"7218eHZXc5CeqZGHF3YDKe1","dragonRecordPanel"),cc.Class({extends:cc.Component,properties:{content:cc.Node,item:cc.Node,item_trendhuo:cc.Node,redParticle:cc.Node,gradParticle:cc.Node,blueParticle:cc.Node,up_new:cc.Node},onLoad:function(){this.item.removeFromParent(),this.item_trendhuo.active=!1,this.content.active=!0,this.up_new.active=!1,this.reset(),this.maxRecord=17,signal.on("match_record_ntf",this.updateUI,this),signal.on("fly_record_ntf",this.flyTrend,this)},start:function(){},btnOpenTrend:function(){e("dragonrecode").show()},flyTrend:function(){var e=this;cc.log("fly chip");var t=cc.vv.gameControl.matchRecord?cc.vv.gameControl.matchRecord:[],i=t[t.length-1];if(i){var n=cc.v2(314,-105),a=null;1==i.winer?(n=cc.v2(0,-63),a=cc.instantiate(this.blueParticle),this.node.addChild(a)):2==i.winer?(n=cc.v2(-314,-105),a=cc.instantiate(this.redParticle),this.node.addChild(a)):(a=cc.instantiate(this.gradParticle),this.node.addChild(a)),a.stopAllActions(),a.active=!0,a.x=n.x,a.y=n.y;var o=this.content.children,c=null;0==o.length?c=cc.v2(-414.5,0):o.length<16?(c=o[o.length-1].position).x=c.x+51:16==o.length?(c=o[o.length-1].position).x=c.x+51:c=o[o.length-1].position,c=this.content.convertToWorldSpaceAR(cc.v2(c.x,c.y)),c=this.node.convertToNodeSpaceAR(c),cc.log("fly chip",c),this.up_new.active=!0,this.up_new.x=c.x+43.479,17==o.length?(this.content.stopAllActions(),this.content.runAction(cc.moveTo(.5,cc.v2(-51,0)))):16==o.length&&(this.content.stopAllActions(),this.content.runAction(cc.moveTo(.5,cc.v2(-51,0)))),cc.vv.audioMgr.playSFX("flyguang",null,BUNDLEENUM.DRAGONGAME),a.runAction(cc.sequence(cc.bezierTo(1.2,[cc.v2(1*(n.x-c.x)+c.x,.4*(c.y-n.y)+n.y),cc.v2(.4*(n.x-c.x)+c.x,1*(c.y-n.y)+n.y),c]),cc.callFunc(function(){a.getChildByName("sp").active=!0,a.getChildByName("sp").getComponent(sp.Skeleton).setAnimation(0,"animation",!1),a.getChildByName("sp").getComponent(sp.Skeleton).setCompleteListener(function(){a.destroy()}),e.updateUI()})))}},updateUI:function(){var e=this;this.content.destroyAllChildren();for(var t=cc.vv.gameControl.matchRecord?cc.vv.gameControl.matchRecord:[],i=t.length>this.maxRecord?t.length-this.maxRecord:0,n=[],a=function(){var i=t[o];n.push(i);var a=cc.instantiate(e.item);a.active=!0,e.content.addChild(a),a.getChildByName("up_30").active=!1,a.getChildByName("up_31").active=!1,a.getChildByName("up_32").active=!1,2==i.winer?a.getChildByName("up_30").active=!0:3==i.winer?a.getChildByName("up_31").active=!0:a.getChildByName("up_32").active=!0,o==t.length-1&&e.scheduleOnce(function(){this.up_new.active=!0,this.up_new.x=a.x}.bind(e),.01)},o=i;o<t.length;o++)a();this.content.x=0},insertOneRecord:function(){},reset:function(){},update:function(){},onDestroy:function(){signal.targetOff(this),this.item.destroy(),this.item_trendhuo.destroy()}}),cc._RF.pop()},{dragonrecode:"dragonrecode"}],dragonRule:[function(e,t){"use strict";cc._RF.push(t,"40ec1ftC/JGjpEYf8ed7/yM","dragonRule"),cc.Class({extends:e("baseView"),statics:{show:function(){var e=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);e?e.load("res/dragonRule",cc.Prefab,function(e,t){if(!e&&t&&t instanceof cc.Prefab){var i=cc.instantiate(t);i.setPosition(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height/2),cc.director.getScene().addChild(i)}}):cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME)}},properties:{},onLoad:function(){}}),cc._RF.pop()},{baseView:void 0}],dragonScene:[function(e,t){"use strict";cc._RF.push(t,"87758nRPF5O/IQnbP3ZrbcS","dragonScene"),cc.Class({extends:cc.Component,properties:{effectPanel:e("dragonEffectPanel"),seatManager:e("dragonSeatMgr"),betAreaPanel:e("dragonBetPanel"),operatorPanel:e("dragonOperatorPanel"),clockBar:cc.Sprite,timeLab:cc.Label,periodLab:cc.Label,chatPanel:cc.Node,bgmClip:{default:void 0,type:cc.AudioClip},barSpriteFrame:{default:[],type:[cc.SpriteFrame]},activeBtn:cc.Node},initGame:function(){cc.vv.gameControl=e("dragonGameControl"),cc.vv.gameRequest=e("dragonGameRequest");var t=e("clubdragonpb");cc.vv.pbManager.pb.club_tiger_x_dragon_pvp=t.club_tiger_x_dragon_pvp,cc.vv.pbManager.pb.club_tiger_x_dragon_login=t.club_tiger_x_dragon_login,cc.vv.pbManager.pb.club_tiger_x_dragon_hall=t.club_tiger_x_dragon_hall},onLoad:function(){this.initGame(),cc.debug.setDisplayStats(!1),this.node.on(cc.Node.EventType.TOUCH_END,function(){signal.emit("touch_screen")},this),signal.on("game_hide",function(){cc.vv.gameServer.closeSockt()},this),signal.on("game_show",function(){cc.director.getScene().getChildByName("AlertSingle")&&cc.director.getScene().getChildByName("AlertSingle").destroy(),cc.vv.gameServer.reconnect()},this),cc.vv.gameControl||(cc.vv.gameControl=e("dragonGameControl")),cc.vv.gameRequest||(cc.vv.gameRequest=e("dragonGameRequest")),signal.on("status_palyer_list",this.restGameScene.bind(this),this),signal.on("init_game",this.initState.bind(this),this),signal.on("state_ntf",this.stateChange.bind(this),this),signal.on("update_switch_ntf",this.updateActiveOpen,this),cc.vv.global.openControl[OPENENUM.OP_DRAGONACTIVE]==ISOPEN.OPEN?this.activeBtn.active=!0:this.activeBtn.active=!1,signal.on("agree_invite",this.agree_invite,this),signal.on("update_chips_select",function(){cc.vv.gameControl.updateCurrentBetConfig()},this),cc.vv.gameControl.curBet=0},agree_invite:function(e){cc.vv.gameControl.invite_tables=e;for(var t=0,i=0;i<cc.vv.gameControl.self_slot.length;i++)t+=cc.vv.gameControl.self_slot[i];0==t&&cc.vv.gameRequest.leaveGameReq()},updateActiveOpen:function(){cc.vv.global.openControl[OPENENUM.OP_DRAGONACTIVE]==ISOPEN.OPEN?this.activeBtn.active=!0:this.activeBtn.active=!1},onBtnClicked:function(t){"people_btn"==t.target.name?e("dragonOnline").show():"chat_btn"==t.target.name?(cc.vv.global.clubchatisright=!0,e("expression").show()):"tall_29"==t.target.name?e("publicPack").show(PUBLICPACK.PUBLIC_PACKAGE):"btn_trend"==t.target.name?e("dragonrecode").show():"btn_shop"==t.target.name?e("walletRechagePanel").show():"btn_act"==t.target.name?e("TotalWangle").show(!0):"bankerButton"==t.target.name?e("dragonBankerReq").show():"active_btn"==t.target.name?e("dragonActive").show():"loinbtn"==t.target.name?(cc.vv.global.showclubShop(),signal.emit("touch_red_item",REDPOINT.LOCAL_SHOP)):t.target.name},restGameScene:function(){},initState:function(e){this.seatManager.updateAllSeat(),e.state==DRAGON_STATUS.BETING||e.state==DRAGON_STATUS.SEND_CARD?this.betAreaPanel.createDeskSlot():this.betAreaPanel.resetDeskChip(),this.operatorPanel.updateChipUI(),this.effectPanel.reset()},stateChange:function(t){switch(this.periodLab.string=""+cc.vv.gameControl.matchId,this.betAreaPanel.updateAreaLight(),this.operatorPanel.updateChipUI(),cc.vv.gameControl.isConnected&&(this.seatManager.updateBanker(),this.seatManager.reset(),t.state!=DRAGON_STATUS.SEND_CARD&&t.state!=DRAGON_STATUS.ENDING||e("Tips").show(TXT("txt_multiplayer_1"))),t.state){case DRAGON_STATUS.STARTING:this.seatManager.updateBanker(),cc.vv.gameControl.isConnected?this.effectPanel.setBackCard():this.effectPanel.showVs();break;case DRAGON_STATUS.BETING:cc.vv.gameControl.isConnected&&this.effectPanel.setBackCard(),cc.vv.gameControl.isConnected;break;case DRAGON_STATUS.SEND_CARD:cc.vv.gameControl.isConnected||(this.seatManager.hideseats(),this.effectPanel.showStopBet(),this.scheduleOnce(function(){this.effectPanel.showCard(t.dragon_open_cards.cards[0],t.tiger_open_cards.cards[0],t.winer)}.bind(this),1));break;case DRAGON_STATUS.ENDING:cc.vv.gameControl.isConnected||(this.seatManager.showseats(),this.betAreaPanel.gameSettle(t));break;case DRAGON_STATUS.WAITING:this.seatManager.updateBanker(),this.effectPanel.reset()}cc.vv.gameControl.isConnected=!1},start:function(){cc.audioEngine.stopAll(),this.playBGM(),this.scheduleOnce(function(){cc.vv.global.touchTiger&&e("dragonActive").show(),cc.vv.global.touchTiger=!1},1);var t={match_list:[{dragon:{cards:[1],point:0,type:0},tiger:{cards:[33],point:0,type:0},winer:1,match_id:"202502110421",time:(new Date).getTime()},{dragon:{cards:[1],point:0,type:0},tiger:{cards:[33],point:0,type:0},winer:3,match_id:"202502110421",time:(new Date).getTime()}]};cc.vv.gameControl.matchRecordNTF(t),this.test()},playBGM:function(){cc.vv.audioMgr.playBGM(this.bgmClip)},update:function(e){if(!cc.vv.gameControl)return this.timeLab.string="0",void(this.clockBar.fillRange=0);cc.vv.gameControl.remainTime-=e;var t="0";cc.vv.gameControl.remainTime<0?(cc.vv.gameControl.remainTime=0,t="0"):t=Math.floor(cc.vv.gameControl.remainTime),this.clockBar.fillRange=cc.vv.gameControl.remainTime/cc.vv.gameControl.totalTime;var i=cc.vv.gameControl.remainTime/cc.vv.gameControl.totalTime;switch(i>.5?1!=this.prossidx&&(this.prossidx=1):i>.25?2!=this.prossidx&&(this.prossidx=2):3!=this.prossidx&&(this.prossidx=3),cc.vv.gameControl.gameStatus){case DRAGON_STATUS.STARTING:this.timeLab.string="0",this.clockBar.node.active=!1;break;case DRAGON_STATUS.BETING:this.timeLab.string=TXT("txt18_20065")+t,this.clockBar.node.active=!0,cc.vv.gameControl.remainTime>.5&&cc.vv.gameControl.remainTime,cc.vv.gameControl.remainTime>5&&cc.vv.gameControl.remainTime-e<5?cc.vv.audioMgr.playSFX("time_54321",null,BUNDLEENUM.DRAGONGAME):cc.vv.gameControl.remainTime>4&&cc.vv.gameControl.remainTime-e<4?cc.vv.audioMgr.playSFX("time_54321",null,BUNDLEENUM.DRAGONGAME):cc.vv.gameControl.remainTime>3&&cc.vv.gameControl.remainTime-e<3?cc.vv.audioMgr.playSFX("time_54321",null,BUNDLEENUM.DRAGONGAME):cc.vv.gameControl.remainTime>2&&cc.vv.gameControl.remainTime-e<2?cc.vv.audioMgr.playSFX("time_54321",null,BUNDLEENUM.DRAGONGAME):cc.vv.gameControl.remainTime>1&&cc.vv.gameControl.remainTime-e<1&&cc.vv.audioMgr.playSFX("time_0",null,BUNDLEENUM.DRAGONGAME);break;case DRAGON_STATUS.SEND_CARD:this.clockBar.node.active=!0,this.timeLab.string=TXT("txt18_20066")+t;break;case DRAGON_STATUS.ENDING:this.clockBar.node.active=!1,this.timeLab.string=TXT("txt18_20066")+t;break;case DRAGON_STATUS.WAITING:this.clockBar.node.active=!0,this.timeLab.string=TXT("txt18_20067")+t}},onDestroy:function(){signal.targetOff(this),cc.audioEngine.stopAll()},test:function(){var e=this,t={match_id:"202502110421",state:5,player_list:[{seat_id:1,player_id:2225,nickname:"md nasim divand",face_url:"India2/head_3.png",vip:0,sex:1,item_list:[{id:1,count:{low:22200,high:0,unsigned:!1}},{id:2,count:{low:0,high:0,unsigned:!1}},{id:3,count:{low:0,high:0,unsigned:!1}},{id:4,count:{low:0,high:0,unsigned:!1}}],total_slot:null,rank:null,total_win:null,register_area:"India Madhya Pradesh",coin:222,jewel:0,guild:0,pearl:0,items:[null,22200,0,0,0],lottery_ticket:0},{seat_id:2,player_id:2367,nickname:"Phone_92367",face_url:"India2/head_15.png",vip:2,sex:1,item_list:[{id:1,count:{low:989200,high:0,unsigned:!1}},{id:2,count:{low:0,high:0,unsigned:!1}},{id:3,count:{low:0,high:0,unsigned:!1}},{id:4,count:{low:0,high:0,unsigned:!1}}],total_slot:null,rank:null,total_win:null,register_area:"India Chandigarh",coin:9892,jewel:0,guild:0,pearl:0,items:[null,989200,0,0,0],lottery_ticket:0},{seat_id:3,player_id:2145,nickname:"Player_62145",face_url:"India2/head_2.png",vip:3,sex:1,item_list:[{id:1,count:{low:2130100,high:0,unsigned:!1}},{id:2,count:{low:0,high:0,unsigned:!1}},{id:3,count:{low:110400,high:0,unsigned:!1}},{id:4,count:{low:0,high:0,unsigned:!1}}],total_slot:null,rank:null,total_win:null,register_area:"India Punjab",coin:22405,jewel:0,guild:0,pearl:0,items:[null,2130100,0,110400,0],lottery_ticket:1104},{seat_id:4,player_id:2423,nickname:"Player_72423",face_url:"India2/head_5.png",vip:1,sex:1,item_list:[{id:1,count:{low:270300,high:0,unsigned:!1}},{id:2,count:{low:0,high:0,unsigned:!1}},{id:3,count:{low:0,high:0,unsigned:!1}},{id:4,count:{low:0,high:0,unsigned:!1}}],total_slot:null,rank:null,total_win:null,register_area:"India Kerala",coin:2703,jewel:0,guild:0,pearl:0,items:[null,270300,0,0,0],lottery_ticket:0},{seat_id:5,player_id:2030,nickname:"Player_62030",face_url:"India2/head_11.png",vip:1,sex:1,item_list:[{id:1,count:{low:101750,high:0,unsigned:!1}},{id:2,count:{low:0,high:0,unsigned:!1}},{id:3,count:{low:31050,high:0,unsigned:!1}},{id:4,count:{low:0,high:0,unsigned:!1}}],total_slot:null,rank:null,total_win:null,register_area:"India Chandigarh",coin:1328,jewel:0,guild:0,pearl:0,items:[null,101750,0,31050,0],lottery_ticket:310.5},{seat_id:6,player_id:2368,nickname:"Yogendra Kumar",face_url:"India2/head_15.png",vip:1,sex:1,item_list:[{id:1,count:{low:230800,high:0,unsigned:!1}},{id:2,count:{low:0,high:0,unsigned:!1}},{id:3,count:{low:0,high:0,unsigned:!1}},{id:4,count:{low:0,high:0,unsigned:!1}}],total_slot:null,rank:null,total_win:null,register_area:"India Goa",coin:2308,jewel:0,guild:0,pearl:0,items:[null,230800,0,0,0],lottery_ticket:0}],total_slot_list:[0,0,0],self_info:{seat_id:7,player_id:152280,nickname:"Player_152280",face_url:"India2/head_13.png",vip:0,sex:1,item_list:[{id:1,count:0},{id:2,count:0},{id:3,count:0},{id:4,count:0}],total_slot:null,rank:null,total_win:null,register_area:"India_Delhi_New Delhi",coin:100,jewel:0,guild:0,pearl:0,items:[0,0,0,0,0],lottery_ticket:25},self_slot_list:[0,0,0],play_game_cnt:null,slot_money_limit:0,bet_coin_list:[5,10,20,50,100,500,1e3,2e3,5e3,1e4]};cc.vv.gameControl.stateRes(t),cc.vv.gameControl.isConnected=!1,this.scheduleOnce(function(){t={match_id:"202502110421",state:1,remain_time:1,dragon_open_cards:{cards:[],point:0,type:0},tiger_open_cards:{cards:[],point:0,type:0},winer:0,pos_win_list:[],continue_time:1,player_list:[],rich_rank_player_count:null,slot_money_limit:null},cc.vv.gameControl.stateNTF(t)},1),this.scheduleOnce(function(){t={match_id:"202502110421",state:2,remain_time:15,dragon_open_cards:{cards:[],point:0,type:0},tiger_open_cards:{cards:[],point:0,type:0},winer:0,pos_win_list:[],continue_time:15,player_list:[],rich_rank_player_count:null,slot_money_limit:null},cc.vv.gameControl.stateNTF(t),e.scheduleOnce(function(){var t=1e4,i=1e4,n=1e4;e.schedule(function(){t+=100*cc.vv.utils.random(10,1e3),i+=100*cc.vv.utils.random(10,1e3),n+=100*cc.vv.utils.random(10,1e3);var e={match_id:"202502110421",total_slot_list:[t,i,n]};cc.vv.gameControl.totalSlotNTF(e)}.bind(e),.1,120)},2)},2);var i=[13,29,45,61,12,28,44,60,11,27,43,59,10,26,42,58,9,25,41,57,8,24,40,56,7,23,39,55,6,22,38,54,5,21,37,53,4,20,36,52,3,19,35,51,2,18,34,50,1,17,33,49],n=cc.vv.utils.random(0,i.length-1),a=i[n],o=i[n=cc.vv.utils.random(0,i.length-1)];function c(e){return 15&e}var s=c(a),r=c(o),l=1;s>r?l=2:s<r&&(l=3),this.scheduleOnce(function(){t={match_id:"202502110420",state:3,remain_time:3,dragon_open_cards:{cards:[a],point:s,type:null},tiger_open_cards:{cards:[o],point:r,type:null},winer:l,pos_win_list:[],continue_time:3,player_list:[],rich_rank_player_count:null,slot_money_limit:null},cc.vv.gameControl.stateNTF(t)},18),this.scheduleOnce(function(){var e=cc.vv.gameControl.self_slot[l-1]*[0,9,2,2][l],i=[];e>0&&(cc.vv.userMgr.addCoin(e),e*=100,i[0]={seat_id:7,player_id:cc.vv.userMgr.player_id,coin:e}),t={match_id:"202502110420",state:4,remain_time:4,dragon_open_cards:{cards:[a],point:s,type:null},tiger_open_cards:{cards:[o],point:r,type:null},winer:l,pos_win_list:[{pos:l,total_win:e,seat_win_list:i}],continue_time:4,player_list:[],rich_rank_player_count:null,slot_money_limit:null,banker_win:0},cc.vv.gameControl.stateNTF(t)},21),this.scheduleOnce(function(){t={match_id:"202502110420",state:5,remain_time:1,dragon_open_cards:{cards:[a],point:s,type:null},tiger_open_cards:{cards:[o],point:r,type:null},winer:l,pos_win_list:[{pos:l,total_win:{low:61440,high:0,unsigned:!1},seat_win_list:[{seat_id:6,player_id:6866,coin:{low:61440,high:0,unsigned:!1}}]}],continue_time:1,player_list:[],rich_rank_player_count:null,slot_money_limit:null},cc.vv.gameControl.stateNTF(t)},25),this.scheduleOnce(function(){e.test()},28)}}),cc._RF.pop()},{Tips:void 0,TotalWangle:void 0,clubdragonpb:"clubdragonpb",dragonActive:"dragonActive",dragonBankerReq:"dragonBankerReq",dragonBetPanel:"dragonBetPanel",dragonEffectPanel:"dragonEffectPanel",dragonGameControl:"dragonGameControl",dragonGameRequest:"dragonGameRequest",dragonOnline:"dragonOnline",dragonOperatorPanel:"dragonOperatorPanel",dragonSeatMgr:"dragonSeatMgr",dragonrecode:"dragonrecode",expression:void 0,publicPack:void 0,walletRechagePanel:void 0}],dragonSeatMgr:[function(e,t){"use strict";cc._RF.push(t,"e453dnrb0RBJp94d/zGT+O9","dragonSeatMgr"),cc.Class({extends:cc.Component,properties:{mySeat:cc.Node,banker:cc.Node,head_img:cc.Sprite,goldLab:cc.Label,nameLab:cc.Label,vipLogo:cc.Node,seatArr:{default:[],type:[cc.Node]},winLab:cc.Prefab,countLab:cc.Label,chipLab:cc.Label,bankernameLab:cc.Label,bankerchipLab:cc.Label,bankerimg:cc.Sprite,bankerframe:cc.SpriteFrame,playerCountLab:cc.Label,spinebanker:sp.Skeleton,spinenoseat:sp.Skeleton,effectNode:cc.Node,mask_voice:cc.Node},updateAllSeat:function(){for(var e=0;e<cc.vv.gameControl.seatInfos.length;e++){var t=cc.vv.gameControl.seatInfos[e];t&&t.user&&cc.isValid(t.seat)?t.com.sitDown(t.user):t&&!t.user&&cc.isValid(t.seat)&&t.com.standUp()}this.updateMySelfSeat()},onLoad:function(){var t=this;this.playerCountLab.node.active=!1,cc.vv.gameControl.seatInfos=[],cc.vv.gameControl.mySeatInfo={};for(var i=0;i<this.seatArr.length;i++){var n={},a=this.seatArr[i];n.seat=a,n.com=a.getComponent("dragonSeat"),n.com.init(i+1),n.user=null,cc.vv.gameControl.seatInfos[i]=n}cc.vv.utils.setPlayerIcon(cc.vv.userMgr.player_id,cc.vv.userMgr.face_url,this.head_img),this.goldLab.string=""+cc.vv.utils.formatChipStr2(cc.vv.userMgr.total_coin),this.nameLab.string=cc.vv.utils.subString2(cc.vv.userMgr.nickname,8),this.spinebanker.clearTracks(),this.spinebanker.setCompleteListener(function(){t.spinebanker.node.active=!1}),this.spinebanker.node.active=!1,this.spinenoseat.clearTracks(),this.spinenoseat.setCompleteListener(function(){t.spinenoseat.node.active=!1}),this.spinenoseat.node.active=!1,signal.on("show_winlose",this.showWinLab,this),signal.on("update_seat_userinfo",this.updateMySelfSeat,this),signal.on("some_one_slot_ntf",this.SlotNtf,this),signal.on("online_gold_ntf",this.online_gold_ntf,this),signal.on("gtim_show_myselfe_voice",this.showvoice,this),signal.on("update_self_nameorHead",this.updateselfnameorHead,this),signal.on("chat_ntf_self",function(i){if(i.seat_id>6&&i.player_id==cc.vv.userMgr.player_id){if(4==i.chat_type)return;e("showChat").show(i,t.head_img.node)}},this)},updateselfnameorHead:function(){cc.vv.utils.setPlayerIcon(cc.vv.userMgr.player_id,cc.vv.userMgr.face_url,this.head_img),this.nameLab.string=cc.vv.utils.subString2(cc.vv.userMgr.nickname,8)},showvoice:function(e){var t=this;this.mask_voice.active=!0,this.mask_voice.stopAllActions(),this.mask_voice.getChildByName("6").getComponent(cc.Animation).play(),this.mask_voice.runAction(cc.sequence(cc.delayTime(e/1e3),cc.callFunc(function(){t.mask_voice.getChildByName("6").getComponent(cc.Animation).stop(),t.mask_voice.active=!1})))},showBankerSp:function(e){this.spinebanker.node.active=!0,this.spinebanker.setAnimation(0,"animation",!1),e>0&&this.showBankerWinLab(e)},showNoSeatSp:function(){this.spinenoseat.node.active=!0,this.spinenoseat.setAnimation(0,"animation",!1)},showSelfSp:function(){},hideseats:function(){},showseats:function(){},SlotNtf:function(e){for(var t=0;t<cc.vv.gameControl.seatInfos.length;t++){var i=cc.vv.gameControl.seatInfos[t];if(i&&i.user&&cc.isValid(i.seat)&&parseInt(i.user.player_id)==parseInt(e.player_id)&&parseInt(i.user.player_id)!=parseInt(cc.vv.userMgr.player_id)){i.com.SlotNtf();break}}},updateMySelfSeat:function(){this.goldLab.string=""+cc.vv.utils.formatChipStr2(cc.vv.userMgr.total_coin),cc.log("cc.vv.userMgr.total_coin>>",cc.vv.userMgr.total_coin)},showWinLab:function(e){this.goldLab.string=""+cc.vv.utils.formatChipStr2(cc.vv.userMgr.total_coin);var t=e.coin;if(parseInt(e.player_id)==parseInt(cc.vv.userMgr.player_id)){var i=cc.v2(.5,.5),n=cc.instantiate(this.winLab);n.setAnchorPoint(i),n.setPosition(0,0),this.mySeat.addChild(n),n.getComponent(cc.Label).string="+"+cc.vv.utils.formatChipStr2(t),n.runAction(cc.sequence(cc.hide(),cc.delayTime(.1),cc.show(),cc.moveBy(.3,0,40),cc.moveBy(.1,0,-10),cc.callFunc(function(){signal.emit("show_add_treasure")},this),cc.delayTime(2.5),cc.callFunc(function(){n.destroy()})))}},showBankerWinLab:function(e){var t=e,i=cc.v2(.5,.5),n=cc.instantiate(this.winLab);n.setAnchorPoint(i),n.setPosition(this.banker.x,this.banker.y),this.effectNode.addChild(n),n.getComponent(cc.Label).string="+"+cc.vv.utils.formatChipStr2(t),n.runAction(cc.sequence(cc.hide(),cc.delayTime(.1),cc.show(),cc.moveBy(.3,0,80),cc.moveBy(.1,0,-10),cc.delayTime(2.5),cc.callFunc(function(){n.destroy()})))},online_gold_ntf:function(){},onBankerClick:function(){},updateBanker:function(){},start:function(){},onDestroy:function(){signal.targetOff(this)},reset:function(){for(var e=0;e<cc.vv.gameControl.seatInfos.length;e++){var t=cc.vv.gameControl.seatInfos[e];t&&t.user&&cc.isValid(t.seat)&&t.com.reset()}},update:function(e){this.isValid&&(null==this.timed&&(this.timed=1),this.timed=this.timed-e,this.timed<=0&&(cc.vv.gameControl.gameStatus!=DRAGON_STATUS.SEND_CARD&&cc.vv.gameControl.gameStatus!=DRAGON_STATUS.ENDING&&(this.goldLab.string=""+cc.vv.utils.formatChipStr2(cc.vv.userMgr.total_coin)),this.timed=1))}}),cc._RF.pop()},{showChat:void 0}],dragonSeat:[function(e,t){"use strict";cc._RF.push(t,"8aa2d/F7uVAybbH6KZJurhE","dragonSeat"),cc.Class({extends:cc.Component,properties:{seat_id:1,userNode_1_1:cc.Node,nouserNode_1:cc.Node,nameLab:cc.Label,goldLab:cc.Label,head_img:cc.Sprite,winSpine:sp.Skeleton,winLab:cc.Prefab,effectNode:cc.Node,mask_voice:cc.Node},onLoad:function(){var e=this;this.standUp(),this.seatPos=cc.v2(0,0),signal.on("show_winlose",this.showWinLose,this),signal.on("update_seat_userinfo",this.updateUI,this),this.winSpine.clearTracks(),this.winSpine.setCompleteListener(function(){e.winSpine.node.active=!1}),this.winSpine.node.active=!1},SlotNtf:function(){this.userNode_1_1.stopAllActions(),this.userNode_1_1.setPosition(0,0),1==this.seat_id||2==this.seat_id||3==this.seat_id?this.userNode_1_1.runAction(cc.sequence([cc.moveTo(.1,10,0),cc.moveTo(.05,-5,0),cc.moveTo(.05,0,0)])):this.userNode_1_1.runAction(cc.sequence([cc.moveTo(.1,-10,0),cc.moveTo(.05,5,0),cc.moveTo(.05,0,0)]))},hideseats:function(){this.userNode_1_1.stopAllActions(),this.userNode_1_1.setPosition(0,0),1==this.seat_id||2==this.seat_id||3==this.seat_id?(this.userNode_1_1.runAction(cc.moveTo(.5,-200,0)),this.nouserNode_1.active?this.nouserNode_1.runAction(cc.moveTo(.5,-200,0)):this.nouserNode_1.setPosition(-200,0),this.seatPos=cc.v2(-200,0)):(this.userNode_1_1.runAction(cc.moveTo(.5,200,0)),this.nouserNode_1.active?this.nouserNode_1.runAction(cc.moveTo(.5,200,0)):this.nouserNode_1.setPosition(200,0),this.seatPos=cc.v2(200,0))},showseats:function(){this.seatPos=cc.v2(0,0),this.userNode_1_1.stopAllActions(),1==this.seat_id||2==this.seat_id||this.seat_id,this.userNode_1_1.runAction(cc.moveTo(.5,0,0)),this.nouserNode_1.active?this.nouserNode_1.runAction(cc.moveTo(.5,0,0)):this.nouserNode_1.setPosition(0,0)},reset:function(){},init:function(t){var i=this;this.seat_id=t,this.userNode_1_1.active=!1,signal.on("chat_ntf",function(t){if(i.user&&i.user.player_id==t.player_id){if(4==t.chat_type)return;e("showChat").show(t,i.head_img.node)}},this)},showWinAin:function(){this.winSpine.node.active=!0,this.winSpine.setAnimation(0,"ani-1",!1)},showSitDownAin:function(){},showvoice:function(e){var t=this;this.mask_voice.active=!0,this.mask_voice.stopAllActions(),this.mask_voice.getChildByName("6").getComponent(cc.Animation).play(),this.mask_voice.runAction(cc.sequence(cc.delayTime(e/1e3),cc.callFunc(function(){t.mask_voice.getChildByName("6").getComponent(cc.Animation).stop(),t.mask_voice.active=!1})))},sitDown:function(e){this.user&&parseInt(this.user.player_id)==parseInt(e.player_id)||this.showSitDownAin(),this.user=e,this.face_url=null,this.updateUI()},standUp:function(){cc.log("standUp",this.seat_id),this.userNode_1_1.active=!1,this.user=null,this.face_url=null,this.isSpecial||(this.nouserNode_1.active=!0)},onBtnClicked:function(t){if("sit_btn"==t.target.name){if(parseInt(cc.vv.userMgr.total_coin)<100)return void e("Tips").show(TXT("txt_11500","\u20b9100"))}else if("user_btn"==t.target.name){if(!this.user)return;parseInt(this.user.player_id)!=parseInt(cc.vv.userMgr.player_id)&&e("emoji").show({player_id:this.user.player_id,seat_id:this.user.seat_id})}},updateUI:function(){if(!this.user)return this.nouserNode_1.active=!0,void(this.userNode_1_1.active=!1);this.nouserNode_1.active=!1,this.userNode_1_1.active=!0,this.userNode_1_1.stopAllActions(),this.userNode_1_1.setPosition(this.seatPos),this.nouserNode_1.stopAllActions(),this.nouserNode_1.setPosition(this.seatPos),this.goldLab.string=cc.vv.utils.subString2(this.user.nickname,8),cc.vv.gameControl.gameStatus!=DRAGON_STATUS.SEND_CARD&&cc.vv.gameControl.gameStatus!=DRAGON_STATUS.ENDING&&cc.log("\u52a0\u94b1"),this.user&&this.face_url!=this.user.face_url&&(this.face_url=this.user.face_url,cc.vv.utils.setPlayerIcon(this.user.player_id,this.face_url,this.head_img))},showWinLose:function(e){this.user,this.user&&parseInt(this.user.player_id)==parseInt(cc.vv.userMgr.player_id)||this.user&&parseInt(this.user.player_id)==parseInt(e.player_id)&&(this.addWinLab(e.coin),this.showWinAin())},addWinLab:function(e){var t,i=cc.v2(.5,.5),n=cc.instantiate(this.winLab);1==this.seat_id||2==this.seat_id||this.seat_id,i=cc.v2(.5,.5),n.setAnchorPoint(i),t=cc.v2(0,0);var a=this.node.convertToWorldSpaceAR(t);a=this.node.convertToNodeSpaceAR(a),n.setPosition(a.x,a.y),this.node.addChild(n),n.getComponent(cc.Label).string="+"+cc.vv.utils.formatChipStr2(e),this.scheduleOnce(function(){var e=360-Math.abs(a.x);1==this.seat_id||2==this.seat_id||3==this.seat_id?n.width/2>e&&(n.x=a.x+(n.width/2-e)):n.width/2>e&&(n.x=a.x-(n.width/2-e)),n.runAction(cc.sequence(cc.hide(),cc.delayTime(.1),cc.show(),cc.moveBy(.3,0,50),cc.moveBy(.1,0,-10),cc.delayTime(2.5),cc.callFunc(function(){n.destroy()})))}.bind(this),.02)},start:function(){},onDestroy:function(){if(signal.targetOff(this),this.user&&this.user.player_id){var e="playerInfoLayer_"+this.user.player_id;if(!cc.director.getScene())return;var t=cc.director.getScene().getChildByName(e);t&&t.getComponent("playerInfoLayer").hidePanel()}}}),cc._RF.pop()},{Tips:void 0,emoji:void 0,showChat:void 0}],dragonrecode:[function(e,t){"use strict";cc._RF.push(t,"a0ebca5SbNHIJxrumtyGhq/","dragonrecode"),cc.Class({extends:e("baseView"),statics:{show:function(e){var t=cc.assetManager.getBundle(BUNDLEENUM.DRAGONGAME);t?t.load("res/dragonrecode",cc.Prefab,function(t,i){if(!t&&i&&i instanceof cc.Prefab){var n=cc.instantiate(i);n.setPosition(cc.view.getVisibleSize().width/2,cc.view.getVisibleSize().height/2),cc.director.getScene().addChild(n),n.getComponent("dragonrecode").showdata(e)}}):cc.error("not find the bundle "+BUNDLEENUM.DRAGONGAME)}},properties:{item_1:cc.Node,item_2:cc.Node,item_trend:cc.Node,redLab:cc.Label,buleLab:cc.Label,greenLab:cc.Label,countLab:cc.Label,line1:{default:[],type:[cc.Node]},line2:{default:[],type:[cc.Node]},texure:{default:[],type:[cc.SpriteFrame]},trendNode:cc.Node,leftLabel:cc.Label,rightLabel:cc.Label,trend_new:cc.Node,up_new:cc.Node,progressBar_1:cc.ProgressBar,progressBar_2:cc.ProgressBar},onLoad:function(){this.trend_new.active=!1,this.up_new.active=!1,this.item_1.removeFromParent(),this.item_2.removeFromParent(),this.item_trend.removeFromParent(),this.maxRecord=50,this.pointArr1=[],this.pointArr2=[],this.scheduleOnce(function(){for(var e=0;e<this.line1.length;e++){var t=this.line1[e];this.pointArr1[e]=[];for(var i=0;i<5;i++){var n=cc.instantiate(this.item_1);n.active=!0,n.opacity=0,t.addChild(n),this.pointArr1[e].push(n)}}}.bind(this),.5),this.scheduleOnce(function(){for(var e=0;e<this.line2.length;e++){var t=this.line2[e];t.width=25,this.pointArr2[e]=[];for(var i=0;i<5;i++){var n=cc.instantiate(this.item_2);n.active=!0,n.opacity=0,t.addChild(n),this.pointArr2[e].push(n)}}}.bind(this),.7),this.scheduleOnce(function(){this.isValid&&(signal.on("match_record_ntf",this.updateUI,this),this.updateUI())}.bind(this),.9)},updateUI:function(){var e=this;if(!this.isupdate){this.isupdate=!0,this.tigerWinNum=0,this.dragonWinNum=0,this.equalWinNum=0;for(var t=cc.vv.gameControl.matchRecord?cc.vv.gameControl.matchRecord:[],i=t.length>this.maxRecord?t.length-this.maxRecord:0,n=-1,a=0,o=0,c=[],s=[],r=[],l=i;l<t.length;l++){var d=t[l];null==c[o]&&(c[o]=[]),c[o].push(d.winer),1==d.winer?this.equalWinNum++:2==d.winer?this.dragonWinNum++:3==d.winer&&this.tigerWinNum++,++a>4&&(a=0,o++)}a=0,o=0;for(var h=0,u=0;u<t.length;u++){var p=t[u];if(-1==n||p.winer==n){for(null==s[o+h]&&(s[o+h]=[]);null!=s[o+h][a];)a--,null==s[o+ ++h]&&(s[o+h]=[]);n=p.winer,s[o+h][a]={winer:n,count:0},a<4?a++:h++}else{for(h=0,s[o]&&o++,a=0,n=p.winer,null==s[o]&&(s[o]=[]);s[o][a];)null==s[++o]&&(s[o]=[]);s[o][a]={winer:n,count:0},a++}}for(var _=i=t.length>12?t.length-12:0;_<t.length;_++){var g=t[_];r.push(g.winer)}for(var m=0;m<this.pointArr1.length;m++)for(var v=this.pointArr1[m],f=0;f<v.length;f++)v[f].opacity=0;for(var y=0;y<this.pointArr2.length;y++)for(var N=this.pointArr2[y],C=0;C<N.length;C++)N[C].opacity=0;o=0,a=0;for(var T=null,b=i=c.length>10?c.length-10:0;b<c.length;b++){for(var R=c[b],E=0;E<5;E++){var A=R[E];if(A&&this.pointArr1[o]){var S=this.pointArr1[o][E];S.opacity=255,S.getComponent(cc.Sprite).spriteFrame=2==A?this.texure[0]:3==A?this.texure[1]:this.texure[2],T=S}}o++}if(T){this.trend_new.active=!0;var B=T.convertToWorldSpaceAR(cc.v2(0,0));B=this.node.convertToNodeSpaceAR(B),this.trend_new.x=B.x,this.trend_new.y=B.y-20}else this.trend_new.active=!1;o=0,a=0;for(var I=i=s.length>27?s.length-27:0;I<s.length;I++){for(var L=s[I],k=0;k<5;k++){var w=L[k];if(w&&this.pointArr2[o]){var P=this.pointArr2[o][k];P.opacity=255,2==w.winer?P.getComponent(cc.Sprite).spriteFrame=this.texure[3]:3==w.winer?P.getComponent(cc.Sprite).spriteFrame=this.texure[4]:P.getComponent(cc.Sprite).spriteFrame=this.texure[5]}}o++}this.trendNode.destroyAllChildren();for(var O=function(){var t=r[D],i=cc.instantiate(e.item_trend);i.active=!0,e.trendNode.addChild(i),i.getChildByName("up_30").active=!1,i.getChildByName("up_31").active=!1,i.getChildByName("up_32").active=!1,2==t?i.getChildByName("up_30").active=!0:3==t?i.getChildByName("up_31").active=!0:i.getChildByName("up_32").active=!0,D==r.length-1&&e.scheduleOnce(function(){this.up_new.active=!0,this.up_new.x=i.x}.bind(e),.01)},D=0;D<r.length;D++)O();this.redLab.string=""+this.tigerWinNum,this.buleLab.string=""+this.dragonWinNum,this.greenLab.string=""+this.equalWinNum,this.countLab.string=""+(this.tigerWinNum+this.dragonWinNum+this.equalWinNum),this.isupdate=!1;var M=Math.floor(this.dragonWinNum/(this.tigerWinNum+this.dragonWinNum+this.equalWinNum)*100),G=Math.floor(this.tigerWinNum/(this.tigerWinNum+this.dragonWinNum+this.equalWinNum)*100);this.leftLabel.string=M+"%",this.rightLabel.string=G+"%",this.progressBar_1.progress=M/100,this.progressBar_2.progress=G/100}},onBtnClicked:function(e){"close_btn"==e.target.name&&this.hidePanel()},showdata:function(){},start:function(){},onDestroy:function(){signal.targetOff(this),this.item_1.destroy(),this.item_2.destroy(),this.item_trend.destroy()}}),cc._RF.pop()},{baseView:void 0}]},{},["dragonErrorHandler","dragonGameControl","dragonGameDisptMsg","dragonGameRequest","dragonActive","dragonActiveRecord","dragonBankerReq","dragonBankerSup","dragonBankerTip","dragonBetArea","dragonBetPanel","dragonChatPanel","dragonChipItem","dragonDetailMgr","dragonEffectPanel","dragonGameDesk","dragonMenu","dragonOnline","dragonOperatorPanel","dragonRecordPanel","dragonRule","dragonScene","dragonSeat","dragonSeatMgr","dragonrecode","clubdragonpb"]);